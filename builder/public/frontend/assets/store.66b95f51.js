var A=Object.defineProperty,V=Object.defineProperties;var $=Object.getOwnPropertyDescriptors;var C=Object.getOwnPropertySymbols;var v=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable;var E=(i,e,t)=>e in i?A(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,c=(i,e)=>{for(var t in e||(e={}))v.call(e,t)&&E(i,t,e[t]);if(C)for(var t of C(e))L.call(e,t)&&E(i,t,e[t]);return i},T=(i,e)=>V(i,$(e));var D=(i,e)=>{var t={};for(var s in i)v.call(i,s)&&e.indexOf(s)<0&&(t[s]=i[s]);if(i!=null&&C)for(var s of C(i))e.indexOf(s)<0&&L.call(i,s)&&(t[s]=i[s]);return t};var a=(i,e,t)=>(E(i,typeof e!="symbol"?e+"":e,t),t);var k=(i,e,t)=>new Promise((s,n)=>{var o=l=>{try{r(t.next(l))}catch(d){n(d)}},h=l=>{try{r(t.throw(l))}catch(d){n(d)}},r=l=>l.done?s(l.value):Promise.resolve(l.value).then(o,h);r((t=t.apply(i,e)).next())});import{z as N,A as m,B as K,C as M,E as _,G as j,H as P,J,K as U}from"./index.99064780.js";import{F as z}from"./fileUploadHandler.7bd6d646.js";const B=N({method:"GET",doctype:"Builder Page",fields:["name","route","blocks","page_name","preview","page_title","creation","page_data_script","draft_blocks","published","dynamic_route","client_script","style","canvas_position"],cache:"pages",orderBy:"creation desc",pageLength:50});function x(i){return i?typeof i=="number"?i:Number(i.replace("px","")):0}function F(i,e=!0){return i=e?Math.round(i):i,`${i}px`}function ae(i){var u;const[e,t,s]=((u=i.replace("#","").match(/.{1,2}/g))==null?void 0:u.map(p=>parseInt(p,16)))||[0,0,0],n=Math.max(e,t,s),o=Math.min(e,t,s),h=n/255,r=n-o,l=n===0?0:r/n;return{h:(n===o?0:n===e?(t-s)/r+(t<s?6:0):n===t?(s-e)/r+2:(e-t)/r+4)*60,s:l,v:h}}function ce(i,e,t){e/=100,t/=100,i/=360;let s=0,n=0,o=0,h=Math.floor(i*6),r=i*6-h,l=t*(1-e),d=t*(1-r*e),u=t*(1-(1-r)*e);switch(h%6){case 0:s=t,n=u,o=l;break;case 1:s=d,n=t,o=l;break;case 2:s=l,n=t,o=u;break;case 3:s=l,n=d,o=t;break;case 4:s=u,n=l,o=t;break;case 5:s=t,n=l,o=d;break}return s=Math.round(s*255),n=Math.round(n*255),o=Math.round(o*255),`#${[s,n,o].map(p=>p.toString(16).padStart(2,"0")).join("")}`}function he(i){return k(this,null,function*(){return new Promise(e=>{const t=window.confirm(i);e(t)})})}function X(i){if(!i||!G(i))return i||"";const e=document.createElement("div");e.innerHTML=i||"";const t=e.textContent||e.innerText||"";return e.remove(),t}function q(i){const[e,t,s]=i.replace("rgb(","").replace(")","").split(",").map(n=>parseInt(n));return`#${[e,t,s].map(n=>n.toString(16).padStart(2,"0")).join("")}`}function de(i){return i?i.startsWith("rgb")?q(i):!i.startsWith("#")&&i.match(/\b[a-fA-F0-9]{3,6}\b/g)?`#${i}`:i:null}function G(i){return/<[a-z][\s\S]*>/i.test(i)}function ge(i,e,t="text/plain"){var s;typeof i!="string"&&(i=JSON.stringify(i)),(s=e.clipboardData)==null||s.setData(t,i)}function W(i){const e=i.lastIndexOf(".");return e===-1?i:i.substr(0,e)}function me(i){let e=0,t=Number.MAX_VALUE,s=i.target;return Array.from(s.children).forEach(function(o,h){const r=o.getBoundingClientRect(),l=r.left+r.width/2,d=r.top+r.height/2,u=Math.sqrt(Math.pow(l-i.clientX,2)+Math.pow(d-i.clientY,2));u<t&&(t=u,e=h,o.compareDocumentPosition(i.target)&Node.DOCUMENT_POSITION_PRECEDING||(e+=1))}),e}function R(i){return i.replace(/-([a-z])/g,function(e){return e[1].toUpperCase()})}function ue(i){try{JSON.parse(i)}catch(e){return!1}return!0}function pe(i){const e=i.target,t=e.isContentEditable,s=e.tagName==="INPUT"||e.tagName==="TEXTAREA";return t||s}function fe(i,e){const t=Object.assign({},i);return e.split(".").reduce((s,n)=>s?s[n]:null,t)}function H(i,e,t){var s;delete i.innerHTML,delete i.element,i.blockId=i.generateId(),i.baseStyles={},i.rawStyles={},i.mobileStyles={},i.tabletStyles={},i.attributes={},i.classes=[],(s=i.children)==null||s.forEach((n,o)=>{n.isChildOfComponent=e;const h=t[o];h&&(n.referenceBlockId=h.blockId,H(n,e,h.children))})}class b{constructor(e){a(this,"blockId");a(this,"children");a(this,"baseStyles");a(this,"rawStyles");a(this,"mobileStyles");a(this,"tabletStyles");a(this,"attributes");a(this,"classes");a(this,"dataKey",null);a(this,"blockName");a(this,"element");a(this,"draggable");a(this,"innerText");a(this,"innerHTML");a(this,"extendedFromComponent");a(this,"originalElement");a(this,"isChildOfComponent");a(this,"referenceBlockId");a(this,"isRepeaterBlock");this.element=e.element,this.innerHTML=e.innerHTML,this.extendedFromComponent=e.extendedFromComponent,this.isRepeaterBlock=e.isRepeaterBlock,this.isChildOfComponent=e.isChildOfComponent,this.referenceBlockId=e.referenceBlockId,this.dataKey=e.dataKey||null,e.innerText&&(this.innerHTML=e.innerText),this.originalElement=e.originalElement,!e.blockId||e.blockId==="root"?this.blockId=this.generateId():this.blockId=e.blockId,this.children=(e.children||[]).map(t=>m(new b(t))),this.baseStyles=m(e.styles||e.baseStyles||{}),this.rawStyles=m(e.rawStyles||{}),this.mobileStyles=m(e.mobileStyles||{}),this.tabletStyles=m(e.tabletStyles||{}),this.attributes=m(e.attributes||{}),this.blockName=e.blockName,delete this.attributes.style,this.classes=e.classes||[],this.isText()&&!this.classes.includes("__text_block__")&&this.classes.push("__text_block__"),this.isRoot()&&(this.blockId="root",this.draggable=!1,this.setBaseStyle("minHeight","100vh"))}getStyles(e="desktop"){let t={};return this.isExtendedFromComponent()&&(t=this.getComponentStyles(e)),t=c(c({},t),this.baseStyles),e==="mobile"?t=c(c({},t),this.mobileStyles):e==="tablet"&&(t=c(c({},t),this.tabletStyles)),t=c(c({},t),this.rawStyles),t}getComponent(){const e=g();if(this.extendedFromComponent)return e.getComponentBlock(this.extendedFromComponent);if(this.isChildOfComponent){const t=e.getComponentBlock(this.isChildOfComponent);return e.findBlock(this.referenceBlockId,[t])||e.findBlock(this.blockId,[t])||new b({})}return this}getComponentStyles(e){var t;return(t=this.getComponent())==null?void 0:t.getStyles(e)}getAttributes(){let e={};return this.isExtendedFromComponent()&&(e=this.getComponentAttributes()),e=c(c({},e),this.attributes),e}getComponentAttributes(){var e;return((e=this.getComponent())==null?void 0:e.attributes)||{}}getClasses(){let e=[];return this.isExtendedFromComponent()&&(e=this.getComponentClasses()),e=[...e,...this.classes],e}getComponentClasses(){var e;return((e=this.getComponent())==null?void 0:e.classes)||[]}getChildren(){return this.children}hasChildren(){return this.getChildren().length>0}getComponentChildren(){var e;return((e=this.getComponent())==null?void 0:e.children)||[]}getBlockDescription(){if(this.isExtendedFromComponent()&&!this.isChildOfComponentBlock())return this.getComponentBlockDescription();if(this.isHTML())return"raw";let e=this.blockName||this.originalElement||this.getElement();return this.getTextContent()&&!this.blockName&&(e+=" | "+this.getTextContent()),e}getComponentBlockDescription(){return g().getComponentName(this.extendedFromComponent)}getTextContent(){let e=this.getEditor(),t="";return this.isText()&&e&&(t=e.getText()),t||X(this.getInnerHTML()||"")}isImage(){return this.getElement()==="img"}isButton(){return this.getElement()==="button"}isLink(){return this.getElement()==="a"}isSVG(){var e;return this.getElement()==="svg"||((e=this.getInnerHTML())==null?void 0:e.startsWith("<svg"))}isText(){return["span","h1","p","b","h2","h3","h4","h5","h6","label","a"].includes(this.getElement())}isContainer(){return["section","div"].includes(this.getElement())}isInput(){return this.originalElement==="input"||this.getElement()==="input"}setStyle(e,t){const s=g();let n=this.baseStyles;if(e=R(e),s.activeBreakpoint==="mobile"?n=this.mobileStyles:s.activeBreakpoint==="tablet"&&(n=this.tabletStyles),t===null||t===""){delete n[e];return}n[e]=t}setAttribute(e,t){this.attributes[e]=t}getAttribute(e){return this.getAttributes()[e]}removeStyle(e){delete this.baseStyles[e],delete this.mobileStyles[e],delete this.tabletStyles[e]}setBaseStyle(e,t){e=R(e),this.baseStyles[e]=t}getStyle(e){const t=g();return t.activeBreakpoint==="mobile"?this.mobileStyles[e]||this.baseStyles[e]:t.activeBreakpoint==="tablet"?this.tabletStyles[e]||this.baseStyles[e]:this.baseStyles[e]}generateId(){return Math.random().toString(36).substr(2,9)}getIcon(){switch(!0){case this.isRoot():return"hash";case this.isRepeater():return"database";case this.isSVG():return"aperture";case this.isHTML():return"code";case this.isLink():return"link";case this.isText():return"type";case(this.isContainer()&&this.isRow()):return"columns";case(this.isContainer()&&this.isColumn()):return"credit-card";case this.isContainer():return"square";case this.isImage():return"image";default:return"square"}}isRoot(){return this.originalElement==="body"}isSection(){return this.getElement()==="section"}getTag(){return this.isButton()?"div":this.getElement()||"div"}getComponentTag(){var e;return((e=this.getComponent())==null?void 0:e.getTag())||"div"}isDiv(){return this.getElement()==="div"}getStylesCopy(){return{baseStyles:Object.assign({},this.baseStyles),mobileStyles:Object.assign({},this.mobileStyles),tabletStyles:Object.assign({},this.tabletStyles)}}isHovered(){return g().hoveredBlock===this.blockId}isSelected(){return g().selectedBlocks.some(t=>t.blockId===this.blockId)}isMovable(){return this.getStyle("position")==="absolute"}move(e){if(!this.isMovable())return;let t=x(this.getStyle("top"))||0,s=x(this.getStyle("left"))||0;e==="up"?(t-=10,this.setStyle("top",F(t))):e==="down"?(t+=10,this.setStyle("top",F(t))):e==="left"?(s-=10,this.setStyle("left",F(s))):e==="right"&&(s+=10,this.setStyle("left",F(s)))}addChild(e,t){t===void 0&&(t=this.children.length),t=K(t,0,this.children.length);const s=m(new b(e));return this.children.splice(t,0,s),s.selectBlock(),s.isText()&&s.makeBlockEditable(),s}removeChild(e){const t=this.getChildIndex(e);t>-1&&this.children.splice(t,1)}getChildIndex(e){return this.children.findIndex(t=>t.blockId===e.blockId)}addChildAfter(e,t){const s=this.getChildIndex(t);return this.addChild(e,s+1)}getEditorStyles(){const e=m({});return this.isRoot()&&(e.width="inherit",e.overflowX="hidden"),this.isImage()&&!this.getAttribute("src")&&(e.background="repeating-linear-gradient(45deg, rgba(180, 180, 180, 0.8) 0px, rgba(180, 180, 180, 0.8) 1px, rgba(255, 255, 255, 0.2) 0px, rgba(255, 255, 255, 0.2) 50%)",e.backgroundSize="16px 16px"),this.isButton()&&this.children.length===0&&(e.display="flex",e.alignItems="center",e.justifyContent="center"),e}selectBlock(){const e=g();e.selectedBlocks=[this]}toggleSelectBlock(){const e=g();this.isSelected()?e.selectedBlocks=e.selectedBlocks.filter(t=>t.blockId!==this.blockId):e.selectedBlocks.push(this)}getParentBlock(){return g().findParentBlock(this.blockId)}canHaveChildren(){return this.isContainer()||this.isRoot()||this.isDiv()}updateStyles(e){this.baseStyles=Object.assign({},this.baseStyles,e.baseStyles),this.mobileStyles=Object.assign({},this.mobileStyles,e.mobileStyles),this.tabletStyles=Object.assign({},this.tabletStyles,e.tabletStyles)}getBackgroundColor(){return this.getStyle("backgroundColor")||"transparent"}getFontFamily(){const e=this.getEditor();return this.isText()&&e&&e.isEditable?e.getAttributes("textStyle").fontFamily:this.getStyle("fontFamily")}setFontFamily(e){const t=this.getEditor();this.isText()&&t&&t.isEditable?t.chain().focus().setFontFamily(e).run():this.setStyle("fontFamily",e)}getTextColor(){const e=this.getEditor();return this.isText()&&e&&e.isEditable?e.getAttributes("textStyle").color:this.getStyle("color")}getEditor(){return null}setTextColor(e){const t=this.getEditor();this.isText()&&t&&t.isEditable?t.chain().focus().setColor(e).run():this.setStyle("color",e)}isHTML(){return this.originalElement==="__raw_html__"}makeBlockEditable(){const e=g();this.selectBlock(),e.builderState.editableBlock=this,M(()=>{var t;(t=this.getEditor())==null||t.commands.focus("all")})}isExtendedFromComponent(){return Boolean(this.extendedFromComponent)||Boolean(this.isChildOfComponent)}convertToRepeater(){this.setBaseStyle("display","flex"),this.setBaseStyle("flexDirection","column"),this.setBaseStyle("alignItems","flex-start"),this.setBaseStyle("justifyContent","flex-start"),this.setBaseStyle("flexWrap","wrap"),this.setBaseStyle("width","fit-content"),this.setBaseStyle("height","fit-content"),this.setBaseStyle("gap","20px"),this.isRepeaterBlock=!0}moveChild(e,t){const s=this.children.findIndex(n=>n.blockId===e.blockId);s>-1&&(this.children.splice(s,1),this.children.splice(t,0,e))}isRepeater(){return this.isRepeaterBlock}getDataKey(e){var s;let t=this.dataKey&&this.dataKey[e]||"";return!t&&this.isExtendedFromComponent()&&(t=(s=this.getComponent())==null?void 0:s.getDataKey(e)),t}setDataKey(e,t){this.dataKey||(this.dataKey={key:"",type:this.isImage()||this.isLink()?"attribute":"key",property:this.isLink()?"href":this.isImage()?"src":"innerHTML"}),this.dataKey[e]=t}getInnerHTML(){let e=this.innerHTML||"";return!e&&this.isExtendedFromComponent()&&(e=this.getComponent().getInnerHTML()),e}setInnerHTML(e){this.innerHTML=e}toggleVisibility(){this.getStyle("display")==="none"?this.setStyle("display","block"):this.setStyle("display","none")}isVisible(){return this.getStyle("display")!=="none"}extendFromComponent(e){this.extendedFromComponent=e,this.resetChanges()}isChildOfComponentBlock(){return Boolean(this.isChildOfComponent)}resetChanges(){const e=this.getComponent();H(this,this.extendedFromComponent,e.children)}convertToLink(){this.element="a",this.attributes.href="#"}getElement(){var e;return this.isExtendedFromComponent()?((e=this.getComponent())==null?void 0:e.element)||"div":this.element}getUsedComponentNames(){const e=g(),t=[];return this.extendedFromComponent&&t.push(this.extendedFromComponent),this.isChildOfComponent&&t.push(this.isChildOfComponent),this.children.forEach(s=>{t.push(...s.getUsedComponentNames())}),t.forEach(s=>{t.push(...e.getComponentBlock(s).getUsedComponentNames())}),new Set(t)}isFlex(){return this.getStyle("display")==="flex"}isRow(){return this.isFlex()&&this.getStyle("flexDirection")==="row"}isColumn(){return this.isFlex()&&this.getStyle("flexDirection")==="column"}duplicateBlock(){var o;const e=g();e.history.pause();const t=e.getBlockCopy(this),s=this.getParentBlock();if(t.getStyle("position")==="absolute"){const h=x(t.getStyle("left")),r=x(t.getStyle("top"));t.setStyle("left",`${h+20}px`),t.setStyle("top",`${r+20}px`)}let n=null;s?n=s.addChildAfter(t,this):n=(o=e.builderState.blocks[0])==null?void 0:o.addChild(t),M(()=>{n&&n.selectBlock(),e.history.resume(),e.history.commit()})}getPadding(){const e=this.getStyle("padding")||"0px",t=this.getStyle("paddingTop"),s=this.getStyle("paddingBottom"),n=this.getStyle("paddingLeft"),o=this.getStyle("paddingRight");return!t&&!s&&!n&&!o?e:t&&s&&t===s&&t===o&&t===n?t:t&&n&&t===s&&n===o?`${t} ${n}`:`${t||e} ${o||e} ${s||e} ${n||e}`}setPadding(e){if(this.removeStyle("padding"),this.removeStyle("paddingTop"),this.removeStyle("paddingBottom"),this.removeStyle("paddingLeft"),this.removeStyle("paddingRight"),!e)return;const t=e.split(" ");t.length===1?this.setStyle("padding",t[0]):t.length===2?(this.setStyle("paddingTop",t[0]),this.setStyle("paddingBottom",t[0]),this.setStyle("paddingLeft",t[1]),this.setStyle("paddingRight",t[1])):t.length===3?(this.setStyle("paddingTop",t[0]),this.setStyle("paddingLeft",t[1]),this.setStyle("paddingRight",t[1]),this.setStyle("paddingBottom",t[2])):t.length===4&&(this.setStyle("paddingTop",t[0]),this.setStyle("paddingRight",t[1]),this.setStyle("paddingBottom",t[2]),this.setStyle("paddingLeft",t[3]))}setMargin(e){if(this.removeStyle("margin"),this.removeStyle("marginTop"),this.removeStyle("marginBottom"),this.removeStyle("marginLeft"),this.removeStyle("marginRight"),!e)return;const t=e.split(" ");t.length===1?this.setStyle("margin",t[0]):t.length===2?(this.setStyle("marginTop",t[0]),this.setStyle("marginBottom",t[0]),this.setStyle("marginLeft",t[1]),this.setStyle("marginRight",t[1])):t.length===3?(this.setStyle("marginTop",t[0]),this.setStyle("marginLeft",t[1]),this.setStyle("marginRight",t[1]),this.setStyle("marginBottom",t[2])):t.length===4&&(this.setStyle("marginTop",t[0]),this.setStyle("marginRight",t[1]),this.setStyle("marginBottom",t[2]),this.setStyle("marginLeft",t[3]))}getMargin(){const e=this.getStyle("margin")||"0px",t=this.getStyle("marginTop"),s=this.getStyle("marginBottom"),n=this.getStyle("marginLeft"),o=this.getStyle("marginRight");return!t&&!s&&!n&&!o?e:t&&s&&t===s&&t===o&&t===n?t:t&&n&&t===s&&n===o?`${t} ${n}`:`${t||e} ${o||e} ${s||e} ${n||e}`}}const I=b,Y=N({method:"GET",doctype:"Builder Component",fields:["component_name","block","name","for_web_page","component_id","category","frame","palette","typography"],orderBy:"creation",cache:"components",start:0,pageLength:100,auto:!0,transform(i){return i.forEach(e=>{e.block instanceof I||(e.block=m(new I(JSON.parse(e.block))))}),i}}),f=Y;function y(i){switch(i){case"section":return{name:"Section",element:"section",attributes:{},baseStyles:{display:"flex",flexDirection:"column",position:"static",height:"100vh",width:"100%",alignItems:"center"}};case"html":return{name:"HTML",element:"div",originalElement:"__raw_html__",innerHTML:'<div style="color: #8e8e8e;background: #f4f4f4;display:flex;flex-direction:column;position:absolute;top:auto;left:auto;width: 200px;height: 155px;align-items:center;font-size:18px;justify-content:center"><p>&lt;paste html&gt;</p></div>',baseStyles:{height:"fit-content",width:"fit-content"}};case"text":return{name:"Text",element:"p",innerHTML:"Text",baseStyles:{position:"absolute",fontSize:"30px",width:"fit-content",height:"fit-content",lineHeight:"1",minWidth:"30px"}};case"image":return{name:"Image",element:"img",baseStyles:{position:"absolute",objectFit:"cover"}};case"container":return{name:"Container",element:"div",blockName:"container",baseStyles:{position:"absolute",display:"flex",flexDirection:"column"}};case"body":return{element:"div",originalElement:"body",attributes:{},editorStyles:{paddingBottom:"100px"},baseStyles:{display:"flex",flexWrap:"wrap",flexDirection:"column",alignItems:"center"},blockId:"root"};case"fit-container":return{name:"Container",element:"div",blockName:"container",baseStyles:{position:"absolute",display:"flex",flexDirection:"column",height:"fit-content",width:"fit-content"}};case"fallback-component":return{name:"HTML",element:"p",originalElement:"__raw_html__",innerHTML:'<div style="color: red;background: #f4f4f4;display:flex;flex-direction:column;position:absolute;top:auto;left:auto;width: 600px;height: 275px;align-items:center;font-size: 30px;justify-content:center"><p>Component missing</p></div>',baseStyles:{position:"absolute",height:"fit-content",width:"fit-content"}}}}/**
 * @license lucide-vue-next v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var w={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};/**
 * @license lucide-vue-next v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=i=>i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),S=(i,e)=>(u,{attrs:l,slots:d})=>{var p=u,{size:t,strokeWidth:s=2,absoluteStrokeWidth:n,color:o,class:h}=p,r=D(p,["size","strokeWidth","absoluteStrokeWidth","color","class"]);return _("svg",c(T(c(T(c({},w),{width:t||w.width,height:t||w.height,stroke:o||w.stroke,"stroke-width":n?Number(s)*24/Number(t):s}),l),{class:["lucide",`lucide-${Z(i)}`]}),r),[...e.map(O=>_(...O)),...d.default?[d.default()]:[]])};/**
 * @license lucide-vue-next v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=S("HelpCircleIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-vue-next v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=S("LayersIcon",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-vue-next v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=S("LayoutPanelLeftIcon",[["rect",{width:"7",height:"18",x:"3",y:"3",rx:"1",key:"2obqm"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}]]);/**
 * @license lucide-vue-next v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=S("ShapesIcon",[["path",{d:"M8.3 10a.7.7 0 0 1-.626-1.079L11.4 3a.7.7 0 0 1 1.198-.043L16.3 8.9a.7.7 0 0 1-.572 1.1Z",key:"1bo67w"}],["rect",{x:"3",y:"14",width:"7",height:"7",rx:"1",key:"1bkyp8"}],["circle",{cx:"17.5",cy:"17.5",r:"3.5",key:"w3z12y"}]]);/**
 * @license lucide-vue-next v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=S("SparklesIcon",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]),ne=j("store",{state:()=>({builderState:{editableBlock:null,blocks:[m(new I(y("body")))]},settingPage:!1,editingComponent:null,editingMode:"page",activeBreakpoint:"desktop",selectedPage:null,pageData:{},mode:"select",selectedBlocks:[],history:{pause:()=>{},resume:()=>{}},usedComponents:{},templatesinUse:null,hoveredBlock:null,hoveredBreakpoint:null,routeVariables:{},autoSave:!0,categories:[{name:"templates",Icon:te,focus:"#FF4488"},{name:"components",Icon:ie,focus:"#F82"},{name:"layers",Icon:ee,focus:"#FB0"},{name:"ia",Icon:se,focus:"#4DD"},{name:"question",Icon:Q,focus:"#38AAFF"}],builderLayout:{rightPanelWidth:275,leftPanelWidth:364,scriptEditorHeight:400},flow:[{name:"Row",styleKey:"flexDirection",styleValue:"row",icon:"columns"},{name:"Column",styleKey:"flexDirection",styleValue:"column",icon:"credit-card"}],alignments:[{name:"Left",styleKey:"justifyContent",styleValue:"flex-start",icon:"align-left"},{name:"Center",styleKey:"justifyContent",styleValue:"center",icon:"align-center"},{name:"Right",styleKey:"justifyContent",styleValue:"flex-end",icon:"align-right"},{name:"Justify",styleKey:"justifyContent",styleValue:"space-between",icon:"align-justify"}],verticalAlignments:[{name:"Top",styleKey:"alignItems",styleValue:"flex-start",icon:"arrow-up"},{name:"Middle",styleKey:"alignItems",styleValue:"center",icon:"minus"},{name:"Bottom",styleKey:"alignItems",styleValue:"flex-end",icon:"arrow-down"}],pageName:"Home",route:"/",pastelCssColors:["#FFFFFF","#F5FFFA","#F8F8FF","#F0F8FF","#F5F5DC","#FFE4C4","#FFEBCD","#FFDEAD","#FFC1C1","#FFB6C1","#FFA07A","#FF8C00","#FF7F50","#FF69B4","#FF6347","#FDB813","#FDAB9F","#FDA50F","#F49AC2","#FFB347","#FFD700","#ADFF2F","#87CEFA","#00BFFF","#ADD8E6","#B0E0E6","#5F9EA0","#FDD5B1","#FCCDE3","#FCC2D9","#FCB4D5","#FBB5A3","#FBB917","#FBB972","#FBB9AC","#FBCEB1","linear-gradient(120deg, #f093fb 0%, #f5576c 100%)","linear-gradient(to top, #a18cd1 0%, #fbc2eb 100%)","linear-gradient(to top, #a8edea 0%, #fed6e3 100%)","linear-gradient(to top, #96fbc4 0%, #f9f586 100%)","linear-gradient(to top, #9795f0 0%, #fbc8d4 100%)","linear-gradient(-60deg, #16a085 0%, #f4d03f 100%)","linear-gradient( 135deg, #81FFEF 10%, #F067B4 100%)","black","transparent"],guides:{showX:!1,showY:!1,x:0,y:0},textColors:["#000000","#424242","#636363","#808080","#9C9C94","#C0C0C0","#CEC6CE","#EFEFEF","#F7F7F7","#FFFFFF"],deviceBreakpoints:[{icon:"monitor",device:"desktop",displayName:"Desktop",width:1400,visible:!0},{icon:"tablet",device:"tablet",displayName:"Tablet",width:800,visible:!1},{icon:"smartphone",device:"mobile",displayName:"Mobile",width:420,visible:!1}],leftPanelActiveTab:"templates",rightPanelActiveTab:"Properties",showRightPanel:!1,showLeftPanel:!0,blockEditorCanvas:{scale:.5,translateX:0,translateY:0,startX:0,startY:0,background:"",scaling:!1,panning:!1,settingCanvas:!0,overlayElement:null},componentEditorCanvas:{scale:.5,translateX:0,translateY:0,startX:0,startY:0,background:"",scaling:!1,panning:!1,settingCanvas:!1,overlayElement:null},copiedStyle:null,components:[]}),actions:{clearBlocks(){this.builderState.blocks=[],this.builderState.blocks.push(this.getRootBlock())},pushBlocks(i){let e=this.builderState.blocks[0];this.editingComponent&&(e=this.getComponentBlock(this.editingComponent));let t=this.getBlockInstance(i[0]);if(t.isRoot()&&!this.editingComponent)this.builderState.blocks=[t];else for(let s of i)e.children.push(this.getBlockInstance(s))},newBlockSection(i){const e=this.getBlockInstance(y("section")),t=this.builderState.blocks[0],s=t.children.indexOf(i);t.children.splice(s+1,0,e),this.selectBlock(e,null)},getFirstBlock(){return this.editingComponent?this.getComponentBlock(this.editingComponent):this.builderState.blocks[0]},getBlockCopy(i,e=!1){let t=JSON.parse(JSON.stringify(i));if(!e){const s=n=>{delete n.blockId;for(let o of n.children||[])s(o)};s(t)}return this.getBlockInstance(t)},getRootBlock(){return this.getBlockInstance(y("body"))},getPageData(){return this.builderState.blocks},setPage(i){return k(this,null,function*(){if(this.settingPage=!0,!i)return;const e=JSON.parse(i.draft_blocks||i.blocks||"[]");this.editPage(),this.clearBlocks(),this.pushBlocks(e),this.pageName=i.page_name,this.route=i.route||"/"+this.pageName.toLowerCase().replace(/ /g,"-"),this.selectedPage=i.name;const t=localStorage.getItem(`${i.name}:routeVariables`)||"{}";this.routeVariables=JSON.parse(t),this.setPageData(),this.setupHistory(),setTimeout(()=>this.settingPage=!1)})},getImageBlock(i,e=""){e=W(e);const t=y("image");return t.attributes||(t.attributes={}),t.attributes.src=i,e&&(t.attributes.alt=e),t},findBlock(i,e){e||(e=this.builderState.blocks);for(const t of e){if(t.blockId===i)return t;if(t.children){const s=this.findBlock(i,t.children);if(s)return s}}return null},findParentBlock(i,e){e||(e=[this.getFirstBlock()]);for(const t of e)if(t.children){for(const n of t.children)if(n.blockId===i)return t;const s=this.findParentBlock(i,t.children);if(s)return s}return null},selectBlock(i,e,t=!0){var s;this.settingPage||(e&&e.shiftKey?i.toggleSelectBlock():i.selectBlock(),t&&((s=document.querySelector(`[data-block-layer-id="${i.blockId}"]`))==null||s.scrollIntoView({behavior:"instant",block:"center"})),this.builderState.editableBlock=null)},getBlockInstance(i){return m(new I(i))},editComponent(i){i.isExtendedFromComponent()&&(this.editingComponent=i==null?void 0:i.extendedFromComponent),this.clearSelection(),this.editingMode="component"},isComponentUsed(i){const e=t=>{if(t.extendedFromComponent===i)return!0;if(t.children){for(const s of t.children)if(e(s))return!0}return!1};for(const t of this.builderState.blocks)if(e(t))return!0;return!1},editPage(i=!1){this.clearSelection(),this.editingMode="page",this.builderState.editableBlock=null,this.editingComponent&&i&&f.setValue.submit({name:this.editingComponent,block:this.getComponentBlock(this.editingComponent)}).then(()=>{P({text:"Component saved!",position:"bottom-center"})}),this.editingComponent=null},getComponentBlock(i){var e;return((e=this.getComponent(i))==null?void 0:e.block)||this.getFallbackBlock()},getComponent(i){return f.getRow(i)},createComponent(i,e=!1){const t=this.getComponent(i.name);if(t){const s=JSON.stringify(t.block),n=JSON.stringify(i.block);return e&&s!==n?f.setValue.submit({name:i.name,block:i.block}):void 0}return f.insert.submit(i).catch(()=>{console.log(`There was an error while creating ${i.component_name}`)})},getFallbackBlock(){return this.getBlockInstance(y("fallback-component"))},getComponentName(i){let e=f.getRow(i);return e?e.component_name:i},setupHistory(){const{builderState:i}=J(this);this.history=U(i,{capacity:200,deep:!0,clone:e=>{let t=Object.assign({},e);return t.blocks=e.blocks.map(s=>this.getBlockCopy(s,!0)),t},debounce:200})},uploadFile(i){return new z().upload(i,{private:!1,folder:"Home/Builder Uploads",optimize:!0}).then(t=>({fileURL:encodeURI(window.location.origin+t.file_url),fileName:t.file_name}))},clearSelection(){this.selectedBlocks=[]},getActivePage(){return B.getRow(this.selectedPage)},publishPage(){return k(this,null,function*(){return B.runDocMethod.submit(c({name:this.selectedPage,method:"publish"},this.routeVariables)).then(i=>{let e=i.message;this.getActivePage().dynamic_route&&this.pageData&&((e==null?void 0:e.match(/<\w+>/g))||[]).map(s=>s.slice(1,-1)).forEach(s=>{this.routeVariables[s]&&(e=e==null?void 0:e.replace(`<${s}>`,this.routeVariables[s]))}),window.open(`/${e}`,"_blank")})})},savePage(){const i=JSON.stringify(this.getPageData()),e={name:this.selectedPage,draft_blocks:i};B.setValue.submit(e)},setPageData(){const i=this.getActivePage();!i||!i.page_data_script||B.runDocMethod.submit(c({method:"get_page_data",name:i.name},this.routeVariables)).then(e=>{this.pageData=e.message}).catch(()=>{P({text:"There was error in fetching page data",position:"top-right",icon:"disabled",iconClasses:"text-red-500"})})},setRouteVariable(i,e){this.routeVariables[i]=e,localStorage.setItem(`${this.selectedPage}:routeVariables`,JSON.stringify(this.routeVariables)),this.setPageData()},openInDesk(i){window.open(`/app/builder-page/${i.page_name}`,"_blank")}}}),g=ne;export{I as B,ce as H,S as a,F as b,he as c,f as d,x as e,me as f,y as g,fe as h,de as i,ae as j,pe as k,ge as l,ue as m,G as n,g as u,B as w};
//# sourceMappingURL=store.66b95f51.js.map
