var K=Object.defineProperty,j=Object.defineProperties;var U=Object.getOwnPropertyDescriptors;var x=Object.getOwnPropertySymbols;var P=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable;var T=(i,e,t)=>e in i?K(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,d=(i,e)=>{for(var t in e||(e={}))P.call(e,t)&&T(i,t,e[t]);if(x)for(var t of x(e))M.call(e,t)&&T(i,t,e[t]);return i},L=(i,e)=>j(i,U(e));var D=(i,e)=>{var t={};for(var n in i)P.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&x)for(var n of x(i))e.indexOf(n)<0&&M.call(i,n)&&(t[n]=i[n]);return t};var l=(i,e,t)=>(T(i,typeof e!="symbol"?e+"":e,t),t);var w=(i,e,t)=>new Promise((n,s)=>{var o=a=>{try{c(t.next(a))}catch(h){s(h)}},r=a=>{try{c(t.throw(a))}catch(h){s(h)}},c=a=>a.done?n(a.value):Promise.resolve(a.value).then(o,r);c((t=t.apply(i,e)).next())});import{z as H,A as g,B as J,C as _,E as A,G,H as N,J as W,K as z}from"./index.36b6a3dc.js";import{F as q}from"./fileUploadHandler.7bd6d646.js";const S=H({method:"GET",doctype:"Builder Page",fields:["name","route","blocks","page_name","preview","page_title","creation","page_data_script","draft_blocks","published","dynamic_route","client_script","style","canvas_position","color_palette"],cache:"pages",orderBy:"creation desc",pageLength:50});function I(i){return i?typeof i=="number"?i:Number(i.replace("px","")):0}function ge(i,e){const t=i.getPosition(),n=e.getPosition();return{x:E(n.x)+E(t.x),y:E(n.y)+E(t.y)}}function f(i,e=!0){return i=e?Math.round(i):i,`${i}px`}function E(i){return typeof i=="number"?i:Number(i.replace("px",""))}function O(i){const e=u();return e.blockEditorCanvas.scale,typeof i=="number"?i*e.blockEditorCanvas.scale:Number(i.replace("px",""))*e.blockEditorCanvas.scale}function me(i){var y;const[e,t,n,s]=((y=i.replace("#","").match(/.{1,2}/g))==null?void 0:y.map(V=>parseInt(V,16)))||[0,0,0,1],o=Math.max(e,t,n),r=Math.min(e,t,n),c=o/255,a=o-r,h=o===0?0:a/o,m=o===r?0:o===e?(t-n)/a+(t<n?6:0):o===t?(n-e)/a+2:(e-t)/a+4,p=s/255;return{h:m*60,s:h,v:c,a:p}}function pe(i,e,t,n){e/=100,t/=100,i/=360,n=n===void 0?1:n;let s=0,o=0,r=0,c=Math.floor(i*6),a=i*6-c,h=t*(1-e),m=t*(1-a*e),p=t*(1-(1-a)*e);switch(c%6){case 0:s=t,o=p,r=h;break;case 1:s=m,o=t,r=h;break;case 2:s=h,o=t,r=p;break;case 3:s=h,o=m,r=t;break;case 4:s=p,o=h,r=t;break;case 5:s=t,o=h,r=m;break}return s=Math.round(s*255),o=Math.round(o*255),r=Math.round(r*255),n=Math.round(n*255),`#${[s,o,r,n].map(y=>y.toString(16).padStart(2,"0")).join("")}`}function fe(i){return w(this,null,function*(){return new Promise(e=>{const t=window.confirm(i);e(t)})})}function X(i){if(!i||!ee(i))return i||"";const e=document.createElement("div");e.innerHTML=i||"";const t=e.textContent||e.innerText||"";return e.remove(),t}function Y(i){const[e,t,n,s]=i.replace("rgba(","").replace(")","").split(",").map(o=>parseInt(o));return`#${[e,t,n].map(o=>o.toString(16).padStart(2,"0")).join("")}${Math.round(s*255).toString(16).padStart(2,"0")}`}function ye(i){return i?(i.startsWith("#")&&(i=i.replace("#","")),i.startsWith("rgba")?Y(i):!i.startsWith("#")&&i.match(/\b[a-fA-F0-9]{3,8}\b/g)?i.length==3?`#${i[0]}${i[0]}${i[1]}${i[1]}${i[2]}${i[2]}FF`:i.length==6?`#${i}FF`:`#${i}`:null):null}function be(i,e){return i.startsWith("#")&&i.match(/\b[a-fA-F0-9]{3,9}\b/g)?i.slice(0,7)+Math.round(e*255).toString(16).padStart(2,"0"):i}function Se(i){return/^#?([A-Fa-f0-9]{0,8})$/.test(i)}function ke(i){return/^(100|[1-9]?[0-9])$/.test(i)}function Z(i,e=!1){if(!i)return"#FFFFFFFF";if(!i.includes("gradient"))return null;const t=i.match(/#[a-fA-F0-9]{8}/);return t?t[0]:null}function Ce(i){if(!i)return!1;i.replace("#","");const e=parseInt(i.slice(1),16),t=e>>16&255,n=e>>8&255,s=e>>0&255;return .2126*t+.7152*n+.0722*s<128}function Q(i){const e=i.match(/#[a-fA-F0-9]{3,8}/g);return e||null}function Fe(i){const e=i.match(/linear|radial|conic/);return e?e[0]:null}function Be(i,e){const t=Q(i);return t&&t.length==e.length&&(i=i.replace(t[0],e[0]),i=i.replace(t[1],e[1])),i}function xe(i){return i?i.startsWith("rgba")?Number(Number(i.replace("rgba(","").replace(")","").split(",")[3]).toFixed(2)):!i.startsWith("#")&&i.match(/\b[a-fA-F0-9]{3,6}\b/g)?1:i.startsWith("#")&&i.length===9?Number((parseInt(i.slice(7,9),16)/255).toFixed(2)):i.startsWith("l")?Number((parseInt(Z(i).slice(7,9),16)/255).toFixed(2)):1:1}function ee(i){return/<[a-z][\s\S]*>/i.test(i)}function we(i,e,t="text/plain"){var n;typeof i!="string"&&(i=JSON.stringify(i)),(n=e.clipboardData)==null||n.setData(t,i)}function te(i){const e=i.lastIndexOf(".");return e===-1?i:i.substr(0,e)}function Ie(i){let e=0,t=Number.MAX_VALUE,n=i.target;return Array.from(n.children).forEach(function(o,r){const c=o.getBoundingClientRect(),a=c.left+c.width/2,h=c.top+c.height/2,m=Math.sqrt(Math.pow(a-i.clientX,2)+Math.pow(h-i.clientY,2));m<t&&(t=m,e=r,o.compareDocumentPosition(i.target)&Node.DOCUMENT_POSITION_PRECEDING||(e+=1))}),e}function R(i){return i.replace(/-([a-z])/g,function(e){return e[1].toUpperCase()})}function Ee(i){try{JSON.parse(i)}catch(e){return!1}return!0}function ve(i){const e=i.target,t=e.isContentEditable,n=e.tagName==="INPUT"||e.tagName==="TEXTAREA";return t||n}function Te(i,e){const t=Object.assign({},i);return e.split(".").reduce((n,s)=>n?n[s]:null,t)}function $(i,e,t){var n;delete i.innerHTML,delete i.element,i.blockId=i.generateId(),i.baseStyles={},i.rawStyles={},i.mobileStyles={},i.tabletStyles={},i.attributes={},i.classes=[],(n=i.children)==null||n.forEach((s,o)=>{s.isChildOfComponent=e;const r=t[o];r&&(s.referenceBlockId=r.blockId,$(s,e,r.children))})}class C{constructor(e){l(this,"blockId");l(this,"children");l(this,"baseStyles");l(this,"rawStyles");l(this,"mobileStyles");l(this,"tabletStyles");l(this,"attributes");l(this,"classes");l(this,"dataKey",null);l(this,"blockName");l(this,"element");l(this,"draggable");l(this,"innerText");l(this,"out",!1);l(this,"innerHTML");l(this,"extendedFromComponent");l(this,"originalElement");l(this,"isChildOfComponent");l(this,"referenceBlockId");l(this,"isRepeaterBlock");l(this,"gradient");var n;this.element=e.element,this.innerHTML=e.innerHTML,this.extendedFromComponent=e.extendedFromComponent,this.isRepeaterBlock=e.isRepeaterBlock,this.isChildOfComponent=e.isChildOfComponent,this.referenceBlockId=e.referenceBlockId,this.dataKey=e.dataKey||null,e.innerText&&(this.innerHTML=e.innerText),this.originalElement=e.originalElement,!e.blockId||e.blockId==="root"?this.blockId=this.generateId():this.blockId=e.blockId,this.children=(e.children||[]).map(s=>g(new C(s))),this.baseStyles=g(e.styles||e.baseStyles||{}),this.rawStyles=g(e.rawStyles||{}),this.mobileStyles=g(e.mobileStyles||{}),this.tabletStyles=g(e.tabletStyles||{}),this.attributes=g(e.attributes||{}),this.blockName=e.blockName,delete this.attributes.style,this.classes=e.classes||[],this.isText()&&!this.classes.includes("__text_block__")&&this.classes.push("__text_block__");const t=(n=this.baseStyles.background)!=null?n:"";t.includes("gradient")&&(this.gradient=t.match(/linear|radial|conic/)[0]),this.isRoot()&&(this.blockId="root",this.draggable=!1,this.setBaseStyle("minHeight","100vh"))}setOut(e){this.out=e}isOut(){return this.out}getStyles(e="desktop"){let t={};return this.isExtendedFromComponent()&&(t=this.getComponentStyles(e)),t=d(d({},t),this.baseStyles),e==="mobile"?t=d(d({},t),this.mobileStyles):e==="tablet"&&(t=d(d({},t),this.tabletStyles)),t=d(d({},t),this.rawStyles),t}getComponent(){const e=u();if(this.extendedFromComponent)return e.getComponentBlock(this.extendedFromComponent);if(this.isChildOfComponent){const t=e.getComponentBlock(this.isChildOfComponent);return e.findBlock(this.referenceBlockId,[t])||e.findBlock(this.blockId,[t])||new C({})}return this}getComponentStyles(e){var t;return(t=this.getComponent())==null?void 0:t.getStyles(e)}getAttributes(){let e={};return this.isExtendedFromComponent()&&(e=this.getComponentAttributes()),e=d(d({},e),this.attributes),e}getComponentAttributes(){var e;return((e=this.getComponent())==null?void 0:e.attributes)||{}}getClasses(){let e=[];return this.isExtendedFromComponent()&&(e=this.getComponentClasses()),e=[...e,...this.classes],e}getComponentClasses(){var e;return((e=this.getComponent())==null?void 0:e.classes)||[]}getChildren(){return this.children}hasChildren(){return this.getChildren().length>0}getComponentChildren(){var e;return((e=this.getComponent())==null?void 0:e.children)||[]}getBlockDescription(){if(this.isExtendedFromComponent()&&!this.isChildOfComponentBlock())return this.getComponentBlockDescription();if(this.isHTML())return"raw";let e=this.blockName||this.originalElement||this.getElement();return this.getTextContent()&&!this.blockName&&(e+=" | "+this.getTextContent()),e}getComponentBlockDescription(){return u().getComponentName(this.extendedFromComponent)}getTextContent(){let e=this.getEditor(),t="";return this.isText()&&e&&(t=e.getText()),t||X(this.getInnerHTML()||"")}isImage(){return this.getElement()==="img"}isButton(){return this.getElement()==="button"}isLink(){return this.getElement()==="a"}isSVG(){var e;return this.getElement()==="svg"||((e=this.getInnerHTML())==null?void 0:e.startsWith("<svg"))}isText(){return["span","h1","p","b","h2","h3","h4","h5","h6","label","a"].includes(this.getElement())}isContainer(){return["section","div"].includes(this.getElement())}isInput(){return this.originalElement==="input"||this.getElement()==="input"}setStyle(e,t){const n=u();let s=this.baseStyles;if(e=R(e),n.activeBreakpoint==="mobile"?s=this.mobileStyles:n.activeBreakpoint==="tablet"&&(s=this.tabletStyles),t===null||t===""){delete s[e];return}s[e]=t}setAttribute(e,t){this.attributes[e]=t}getAttribute(e){return this.getAttributes()[e]}removeStyle(e){delete this.baseStyles[e],delete this.mobileStyles[e],delete this.tabletStyles[e]}setBaseStyle(e,t){e=R(e),this.baseStyles[e]=t}getStyle(e){const t=u();return t.activeBreakpoint==="mobile"?this.mobileStyles[e]||this.baseStyles[e]:t.activeBreakpoint==="tablet"?this.tabletStyles[e]||this.baseStyles[e]:this.baseStyles[e]}generateId(){return Math.random().toString(36).substr(2,9)}getIcon(){switch(!0){case this.isRoot():return"hash";case this.isRepeater():return"database";case this.isSVG():return"aperture";case this.isHTML():return"code";case this.isLink():return"link";case this.isText():return"type";case(this.isContainer()&&this.isRow()):return"columns";case(this.isContainer()&&this.isColumn()):return"credit-card";case this.isContainer():return"square";case this.isImage():return"image";default:return"square"}}isRoot(){return this.originalElement==="body"}isSection(){return this.getElement()==="section"}getTag(){return this.isButton()?"div":this.getElement()||"div"}getComponentTag(){var e;return((e=this.getComponent())==null?void 0:e.getTag())||"div"}isDiv(){return this.getElement()==="div"}getStylesCopy(){return{baseStyles:Object.assign({},this.baseStyles),mobileStyles:Object.assign({},this.mobileStyles),tabletStyles:Object.assign({},this.tabletStyles)}}isHovered(){return u().hoveredBlock===this.blockId}isSelected(){return u().selectedBlocks.some(t=>t.blockId===this.blockId)}isMovable(){return this.getStyle("position")==="absolute"}freemove(e,t){u().clearSelection(),this.setStyle("left",f(e)),this.setStyle("top",f(t))}move(e){if(!this.isMovable())return;let t=I(this.getStyle("top"))||0,n=I(this.getStyle("left"))||0;e==="up"?(t-=10,this.setStyle("top",f(t))):e==="down"?(t+=10,this.setStyle("top",f(t))):e==="left"?(n-=10,this.setStyle("left",f(n))):e==="right"&&(n+=10,this.setStyle("left",f(n)))}addChild(e,t){t===void 0&&(t=this.children.length),t=J(t,0,this.children.length);const n=g(new C(e));return this.children.splice(t,0,n),n.selectBlock(),n.isText()&&n.makeBlockEditable(),n}setPosition(e,t){this.setStyle("left",f(e)),this.setStyle("top",f(t))}removeChild(e){const t=this.getChildIndex(e);t>-1&&this.children.splice(t,1)}getChildIndex(e){return this.children.findIndex(t=>t.blockId===e.blockId)}addChildAfter(e,t){const n=this.getChildIndex(t);return this.addChild(e,n+1)}getEditorStyles(){const e=g({});return this.isRoot()&&(e.width="inherit",e.overflowX="hidden"),this.isImage()&&!this.getAttribute("src")&&(e.background="repeating-linear-gradient(45deg, rgba(180, 180, 180, 0.8) 0px, rgba(180, 180, 180, 0.8) 1px, rgba(255, 255, 255, 0.2) 0px, rgba(255, 255, 255, 0.2) 50%)",e.backgroundSize="16px 16px"),this.isButton()&&this.children.length===0&&(e.display="flex",e.alignItems="center",e.justifyContent="center"),e}selectBlock(){const e=u();e.selectedBlocks=[this]}toggleSelectBlock(){const e=u();this.isSelected()?e.selectedBlocks=e.selectedBlocks.filter(t=>t.blockId!==this.blockId):e.selectedBlocks.push(this)}getParentBlock(){return u().findParentBlock(this.blockId)}canHaveChildren(){return this.isContainer()||this.isRoot()||this.isDiv()}updateStyles(e){this.baseStyles=Object.assign({},this.baseStyles,e.baseStyles),this.mobileStyles=Object.assign({},this.mobileStyles,e.mobileStyles),this.tabletStyles=Object.assign({},this.tabletStyles,e.tabletStyles)}getBackgroundColor(){return this.getStyle("backgroundColor")||"transparent"}getPosition(){return{x:this.getStyle("left"),y:this.getStyle("top")}}getSize(){return{width:this.getStyle("width"),height:this.getStyle("height")}}getRealSize(){const e=document.querySelector(`[data-block-id="${this.blockId}"]`);return e?{width:O(e.clientWidth),height:O(e.clientHeight)}:{width:0,height:0}}getFontFamily(){const e=this.getEditor();return this.isText()&&e&&e.isEditable?e.getAttributes("textStyle").fontFamily:this.getStyle("fontFamily")}setFontFamily(e){const t=this.getEditor();this.isText()&&t&&t.isEditable?t.chain().focus().setFontFamily(e).run():this.setStyle("fontFamily",e)}getTextColor(){const e=this.getEditor();return this.isText()&&e&&e.isEditable?e.getAttributes("textStyle").color:this.getStyle("color")}getEditor(){return null}setTextColor(e){const t=this.getEditor();this.isText()&&t&&t.isEditable?t.chain().focus().setColor(e).run():this.setStyle("color",e)}isHTML(){return this.originalElement==="__raw_html__"}makeBlockEditable(){const e=u();this.selectBlock(),e.builderState.editableBlock=this,_(()=>{var t;(t=this.getEditor())==null||t.commands.focus("all")})}isExtendedFromComponent(){return Boolean(this.extendedFromComponent)||Boolean(this.isChildOfComponent)}convertToRepeater(){this.setBaseStyle("display","flex"),this.setBaseStyle("flexDirection","column"),this.setBaseStyle("alignItems","flex-start"),this.setBaseStyle("justifyContent","flex-start"),this.setBaseStyle("flexWrap","wrap"),this.setBaseStyle("width","fit-content"),this.setBaseStyle("height","fit-content"),this.setBaseStyle("gap","20px"),this.isRepeaterBlock=!0}moveChild(e,t){const n=this.children.findIndex(s=>s.blockId===e.blockId);n>-1&&(this.children.splice(n,1),this.children.splice(t,0,e))}isRepeater(){return this.isRepeaterBlock}getDataKey(e){var n;let t=this.dataKey&&this.dataKey[e]||"";return!t&&this.isExtendedFromComponent()&&(t=(n=this.getComponent())==null?void 0:n.getDataKey(e)),t}setDataKey(e,t){this.dataKey||(this.dataKey={key:"",type:this.isImage()||this.isLink()?"attribute":"key",property:this.isLink()?"href":this.isImage()?"src":"innerHTML"}),this.dataKey[e]=t}getInnerHTML(){let e=this.innerHTML||"";return!e&&this.isExtendedFromComponent()&&(e=this.getComponent().getInnerHTML()),e}setInnerHTML(e){this.innerHTML=e}getGradient(){return this.gradient}setGradient(e){this.gradient=e}toggleVisibility(){this.getStyle("display")==="none"?this.setStyle("display","block"):this.setStyle("display","none")}isVisible(){return this.getStyle("display")!=="none"}extendFromComponent(e){this.extendedFromComponent=e,this.resetChanges()}isChildOfComponentBlock(){return Boolean(this.isChildOfComponent)}resetChanges(){const e=this.getComponent();$(this,this.extendedFromComponent,e.children)}convertToLink(){this.element="a",this.attributes.href="#"}getElement(){var e;return this.isExtendedFromComponent()?((e=this.getComponent())==null?void 0:e.element)||"div":this.element}getUsedComponentNames(){const e=u(),t=[];return this.extendedFromComponent&&t.push(this.extendedFromComponent),this.isChildOfComponent&&t.push(this.isChildOfComponent),this.children.forEach(n=>{t.push(...n.getUsedComponentNames())}),t.forEach(n=>{t.push(...e.getComponentBlock(n).getUsedComponentNames())}),new Set(t)}isFlex(){return this.getStyle("display")==="flex"}isRow(){return this.isFlex()&&this.getStyle("flexDirection")==="row"}isColumn(){return this.isFlex()&&this.getStyle("flexDirection")==="column"}duplicateBlock(){var o;const e=u();e.history.pause();const t=e.getBlockCopy(this),n=this.getParentBlock();if(t.getStyle("position")==="absolute"){const r=I(t.getStyle("left")),c=I(t.getStyle("top"));t.setStyle("left",`${r+20}px`),t.setStyle("top",`${c+20}px`)}let s=null;n?s=n.addChildAfter(t,this):s=(o=e.builderState.blocks[0])==null?void 0:o.addChild(t),_(()=>{s&&s.selectBlock(),e.history.resume(),e.history.commit()})}getPadding(){const e=this.getStyle("padding")||"0px",t=this.getStyle("paddingTop"),n=this.getStyle("paddingBottom"),s=this.getStyle("paddingLeft"),o=this.getStyle("paddingRight");return!t&&!n&&!s&&!o?e:t&&n&&t===n&&t===o&&t===s?t:t&&s&&t===n&&s===o?`${t} ${s}`:`${t||e} ${o||e} ${n||e} ${s||e}`}setPadding(e){if(this.removeStyle("padding"),this.removeStyle("paddingTop"),this.removeStyle("paddingBottom"),this.removeStyle("paddingLeft"),this.removeStyle("paddingRight"),!e)return;const t=e.split(" ");t.length===1?this.setStyle("padding",t[0]):t.length===2?(this.setStyle("paddingTop",t[0]),this.setStyle("paddingBottom",t[0]),this.setStyle("paddingLeft",t[1]),this.setStyle("paddingRight",t[1])):t.length===3?(this.setStyle("paddingTop",t[0]),this.setStyle("paddingLeft",t[1]),this.setStyle("paddingRight",t[1]),this.setStyle("paddingBottom",t[2])):t.length===4&&(this.setStyle("paddingTop",t[0]),this.setStyle("paddingRight",t[1]),this.setStyle("paddingBottom",t[2]),this.setStyle("paddingLeft",t[3]))}setMargin(e){if(this.removeStyle("margin"),this.removeStyle("marginTop"),this.removeStyle("marginBottom"),this.removeStyle("marginLeft"),this.removeStyle("marginRight"),!e)return;const t=e.split(" ");t.length===1?this.setStyle("margin",t[0]):t.length===2?(this.setStyle("marginTop",t[0]),this.setStyle("marginBottom",t[0]),this.setStyle("marginLeft",t[1]),this.setStyle("marginRight",t[1])):t.length===3?(this.setStyle("marginTop",t[0]),this.setStyle("marginLeft",t[1]),this.setStyle("marginRight",t[1]),this.setStyle("marginBottom",t[2])):t.length===4&&(this.setStyle("marginTop",t[0]),this.setStyle("marginRight",t[1]),this.setStyle("marginBottom",t[2]),this.setStyle("marginLeft",t[3]))}getMargin(){const e=this.getStyle("margin")||"0px",t=this.getStyle("marginTop"),n=this.getStyle("marginBottom"),s=this.getStyle("marginLeft"),o=this.getStyle("marginRight");return!t&&!n&&!s&&!o?e:t&&n&&t===n&&t===o&&t===s?t:t&&s&&t===n&&s===o?`${t} ${s}`:`${t||e} ${o||e} ${n||e} ${s||e}`}}const F=C,ie=H({method:"GET",doctype:"Builder Component",fields:["component_name","block","name","for_web_page","component_id","category","frame","palette","typography"],orderBy:"creation",cache:"components",start:0,pageLength:100,auto:!0,transform(i){return i.forEach(e=>{e.block instanceof F||(e.block=g(new F(JSON.parse(e.block))))}),i}}),k=ie;function b(i){switch(i){case"section":return{name:"Section",element:"section",attributes:{},baseStyles:{position:"relative",height:"100vh",width:"100%"}};case"html":return{name:"HTML",element:"div",originalElement:"__raw_html__",innerHTML:'<div style="color: #8e8e8e;background: #f4f4f4;display:flex;flex-direction:column;position:absolute;top:auto;left:auto;width: 200px;height: 155px;align-items:center;font-size:18px;justify-content:center"><p>&lt;paste html&gt;</p></div>',baseStyles:{position:"absolute",height:"fit-content",width:"fit-content"}};case"text":return{name:"Text",element:"p",innerHTML:"Text",baseStyles:{position:"absolute",fontSize:"30px",width:"fit-content",height:"fit-content",lineHeight:"1",minWidth:"30px"}};case"image":return{name:"Image",element:"img",baseStyles:{position:"absolute",objectFit:"cover"}};case"container":return{name:"Container",element:"div",blockName:"container",baseStyles:{position:"absolute"}};case"body":return{element:"div",originalElement:"body",children:[g(new F(b("section")))],attributes:{},baseStyles:{display:"flex",flexWrap:"wrap",flexDirection:"column"},blockId:"root"};case"fit-container":return{name:"Container",element:"div",blockName:"container",baseStyles:{position:"absolute",height:"fit-content",width:"fit-content"}};case"fallback-component":return{name:"HTML",element:"p",originalElement:"__raw_html__",innerHTML:'<div style="color: red;background: #f4f4f4;display:flex;flex-direction:column;position:absolute;top:auto;left:auto;width: 600px;height: 275px;align-items:center;font-size: 30px;justify-content:center"><p>Component missing</p></div>',baseStyles:{position:"absolute",height:"fit-content",width:"fit-content"}}}}/**
 * @license lucide-vue-next v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var v={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};/**
 * @license lucide-vue-next v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=i=>i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),B=(i,e)=>(m,{attrs:a,slots:h})=>{var p=m,{size:t,strokeWidth:n=2,absoluteStrokeWidth:s,color:o,class:r}=p,c=D(p,["size","strokeWidth","absoluteStrokeWidth","color","class"]);return A("svg",d(L(d(L(d({},v),{width:t||v.width,height:t||v.height,stroke:o||v.stroke,"stroke-width":s?Number(n)*24/Number(t):n}),a),{class:["lucide",`lucide-${ne(i)}`]}),c),[...e.map(y=>A(...y)),...h.default?[h.default()]:[]])};/**
 * @license lucide-vue-next v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=B("HelpCircleIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-vue-next v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oe=B("LayersIcon",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-vue-next v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=B("LayoutPanelLeftIcon",[["rect",{width:"7",height:"18",x:"3",y:"3",rx:"1",key:"2obqm"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}]]);/**
 * @license lucide-vue-next v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=B("ShapesIcon",[["path",{d:"M8.3 10a.7.7 0 0 1-.626-1.079L11.4 3a.7.7 0 0 1 1.198-.043L16.3 8.9a.7.7 0 0 1-.572 1.1Z",key:"1bo67w"}],["rect",{x:"3",y:"14",width:"7",height:"7",rx:"1",key:"1bkyp8"}],["circle",{cx:"17.5",cy:"17.5",r:"3.5",key:"w3z12y"}]]);/**
 * @license lucide-vue-next v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=B("SparklesIcon",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]),ce=G("store",{state:()=>({builderState:{editableBlock:null,blocks:[g(new F(b("body")))]},settingPage:!1,defaultKeys:["Backspace","Delete","Enter","Meta","Shift","Control","Alt","CapsLock","Tab","Escape","ArrowLeft","ArrowRight","ArrowUp","ArrowDown","Home","End","PageUp","PageDown","Insert","NumLock","ScrollLock","Pause","ContextMenu","PrintScreen","Help","Clear","F1","F2","F3","F4","F5","F6","F7","F8","F9","F10","F11","F12","F13","F14","F15","F16","F17","F18","F19","F20","F21","F22","F23","F24","F25","F26","F27","F28","F29","F30","F31","F32","F33","F34","F35","F36","F37","F38","F39","F40","F41","F42","F43","F44"],editingComponent:null,editingMode:"page",activeBreakpoint:"desktop",selectedPage:null,pageData:{},mode:"select",selectedBlocks:[],history:{pause:()=>{},resume:()=>{}},usedComponents:{},templatesinUse:null,hoveredBlock:null,hoveredBreakpoint:null,routeVariables:{},autoSave:!0,categories:[{name:"templates",Icon:re,focus:"#FF4488"},{name:"components",Icon:le,focus:"#F82"},{name:"layers",Icon:oe,focus:"#FB0"},{name:"ia",Icon:ae,focus:"#4DD"},{name:"question",Icon:se,focus:"#38AAFF"}],builderLayout:{rightPanelWidth:267,leftPanelWidth:364,scriptEditorHeight:400},flow:[{name:"Row",styleKey:"flexDirection",styleValue:"row",icon:"columns"},{name:"Column",styleKey:"flexDirection",styleValue:"column",icon:"credit-card"}],alignments:[{name:"Left",styleKey:"justifyContent",styleValue:"flex-start",icon:"align-left"},{name:"Center",styleKey:"justifyContent",styleValue:"center",icon:"align-center"},{name:"Right",styleKey:"justifyContent",styleValue:"flex-end",icon:"align-right"},{name:"Justify",styleKey:"justifyContent",styleValue:"space-between",icon:"align-justify"}],verticalAlignments:[{name:"Top",styleKey:"alignItems",styleValue:"flex-start",icon:"arrow-up"},{name:"Middle",styleKey:"alignItems",styleValue:"center",icon:"minus"},{name:"Bottom",styleKey:"alignItems",styleValue:"flex-end",icon:"arrow-down"}],pageName:"Home",route:"/",paletteColors:null,pastelCssColors:["#FFFFFF","#F5FFFA","#F8F8FF","#F0F8FF","#F5F5DC","#FFE4C4","#FFEBCD","#FFDEAD","#FFC1C1","#FFB6C1","#FFA07A","#FF8C00","#FF7F50","#FF69B4","#FF6347","#FDB813","#FDAB9F","#FDA50F","#F49AC2","#FFB347","#FFD700","#ADFF2F","#87CEFA","#00BFFF","#ADD8E6","#B0E0E6","#5F9EA0","#FDD5B1","#FCCDE3","#FCC2D9","#FCB4D5","#FBB5A3","#FBB917","#FBB972","#FBB9AC","#FBCEB1","linear-gradient(120deg, #f093fb 0%, #f5576c 100%)","linear-gradient(to top, #a18cd1 0%, #fbc2eb 100%)","linear-gradient(to top, #a8edea 0%, #fed6e3 100%)","linear-gradient(to top, #96fbc4 0%, #f9f586 100%)","linear-gradient(to top, #9795f0 0%, #fbc8d4 100%)","linear-gradient(-60deg, #16a085 0%, #f4d03f 100%)","linear-gradient( 135deg, #81FFEF 10%, #F067B4 100%)","black","transparent"],guides:{showX:!1,showY:!1,x:0,y:0},textColors:["#000000","#424242","#636363","#808080","#9C9C94","#C0C0C0","#CEC6CE","#EFEFEF","#F7F7F7","#FFFFFF"],deviceBreakpoints:[{icon:"monitor",device:"desktop",displayName:"Desktop",width:1400,visible:!0},{icon:"tablet",device:"tablet",displayName:"Tablet",width:800,visible:!1},{icon:"smartphone",device:"mobile",displayName:"Mobile",width:420,visible:!1}],leftPanelActiveTab:"templates",rightPanelActiveTab:"Properties",rightPanelSimpleActiveTab:"Edit",showRightPanel:!0,showAvanced:!1,showLeftPanel:!0,blockEditorCanvas:{scale:.5,translateX:0,translateY:0,startX:0,startY:0,background:"",scaling:!1,panning:!1,settingCanvas:!0,overlayElement:null},componentEditorCanvas:{scale:.5,translateX:0,translateY:0,startX:0,startY:0,background:"",scaling:!1,panning:!1,settingCanvas:!1,overlayElement:null},copiedStyle:null,components:[]}),actions:{clearBlocks(){this.builderState.blocks=[],this.builderState.blocks.push(this.getRootBlock())},pushBlocks(i){let e=this.builderState.blocks[0];this.editingComponent&&(e=this.getComponentBlock(this.editingComponent));let t=this.getBlockInstance(i[0]);if(t.isRoot(),!this.editingComponent)this.builderState.blocks=[t];else for(let n of i)e.children.push(this.getBlockInstance(n))},newBlockSection(i){const e=this.getBlockInstance(b("section"));if(i){const t=this.builderState.blocks[0].children.indexOf(i);this.builderState.blocks[0].children.splice(t+1,0,e)}else this.builderState.blocks[0].children.push(e)},getFirstBlock(){return this.editingComponent?this.getComponentBlock(this.editingComponent):this.builderState.blocks[0]},getBlockCopy(i,e=!1){let t=JSON.parse(JSON.stringify(i));if(!e){const n=s=>{delete s.blockId;for(let o of s.children||[])n(o)};n(t)}return this.getBlockInstance(t)},deleteSection(i){const e=this.findBlock("root"),t=e.children.indexOf(i);e.children.splice(t,1)},moveSectionUp(i){const e=this.findBlock("root"),t=e.children.indexOf(i);t>0&&e.children.splice(t-1,0,e.children.splice(t,1)[0])},moveBlockDown(){this.selectedBlocks.forEach(i=>{const e=this.findParentBlock(i.blockId),t=e.children.indexOf(i);t>0&&e.children.splice(t-1,0,e.children.splice(t,1)[0])})},moveBlockUp(){this.selectedBlocks.forEach(i=>{const e=this.findParentBlock(i.blockId),t=e.children.indexOf(i);t<e.children.length-1&&e.children.splice(t+1,0,e.children.splice(t,1)[0])})},moveSectionDown(i){const e=this.findBlock("root"),t=e.children.indexOf(i);t<e.children.length-1&&e.children.splice(t+1,0,e.children.splice(t,1)[0])},getRootBlock(){return this.getBlockInstance(b("body"))},getPageData(){return this.builderState.blocks},setPage(i){return w(this,null,function*(){if(this.settingPage=!0,!i)return;const e=JSON.parse(i.draft_blocks||i.blocks||"[]");this.editPage(),this.clearBlocks(),this.pushBlocks(e),this.pageName=i.page_name,this.route=i.route||"/"+this.pageName.toLowerCase().replace(/ /g,"-"),this.selectedPage=i.name;const t=localStorage.getItem(`${i.name}:routeVariables`)||"{}";this.routeVariables=JSON.parse(t),this.setPageData(),this.setupHistory(),setTimeout(()=>this.settingPage=!1)})},getImageBlock(i,e=""){e=te(e);const t=b("image");return t.attributes||(t.attributes={}),t.attributes.src=i,e&&(t.attributes.alt=e),t},findBlock(i,e){e||(e=this.builderState.blocks);for(const t of e){if(t.blockId===i)return t;if(t.children){const n=this.findBlock(i,t.children);if(n)return n}}return null},findParentBlock(i,e){e||(e=[this.getFirstBlock()]);for(const t of e)if(t.children){for(const s of t.children)if(s.blockId===i)return t;const n=this.findParentBlock(i,t.children);if(n)return n}return null},selectBlock(i,e,t=!0){var n;this.settingPage||(e.shiftKey?i.toggleSelectBlock():i.selectBlock(),t&&((n=document.querySelector(`[data-block-layer-id="${i.blockId}"]`))==null||n.scrollIntoView({behavior:"instant",block:"center"})),this.builderState.editableBlock=null)},getBlockInstance(i){return g(new F(i))},editComponent(i){i.isExtendedFromComponent()&&(this.editingComponent=i==null?void 0:i.extendedFromComponent),this.clearSelection(),this.editingMode="component"},isComponentUsed(i){const e=t=>{if(t.extendedFromComponent===i)return!0;if(t.children){for(const n of t.children)if(e(n))return!0}return!1};for(const t of this.builderState.blocks)if(e(t))return!0;return!1},editPage(i=!1){this.clearSelection(),this.editingMode="page",this.builderState.editableBlock=null,this.editingComponent&&i&&k.setValue.submit({name:this.editingComponent,block:this.getComponentBlock(this.editingComponent)}).then(()=>{N({text:"Component saved!",position:"bottom-center"})}),this.editingComponent=null},getComponentBlock(i){var e;return((e=this.getComponent(i))==null?void 0:e.block)||this.getFallbackBlock()},getPaletteColors(){return this.getActivePage().color_palette},getComponent(i){return k.getRow(i)},createComponent(i,e=!1){const t=this.getComponent(i.name);if(t){const n=JSON.stringify(t.block),s=JSON.stringify(i.block);return n!==s?k.setValue.submit({name:i.name,block:i.block}):void 0}return k.insert.submit(i).catch(()=>{console.log(`There was an error while creating ${i.component_name}`)})},updateColors(){const i=this.getActivePage();i.color_palette=JSON.stringify(this.paletteColors),S.setValue.submit({name:i.name,color_palette:i.color_palette})},getFallbackBlock(){return this.getBlockInstance(b("fallback-component"))},getComponentName(i){let e=k.getRow(i);return e?e.component_name:i},setupHistory(){const{builderState:i}=W(this);this.history=z(i,{capacity:200,deep:!0,clone:e=>{let t=Object.assign({},e);return t.blocks=e.blocks.map(n=>this.getBlockCopy(n,!0)),t},debounce:200})},uploadFile(i){return new q().upload(i,{private:!1,folder:"Home/Builder Uploads",optimize:!0}).then(t=>({fileURL:encodeURI(window.location.origin+t.file_url),fileName:t.file_name}))},clearSelection(){this.selectedBlocks=[]},getActivePage(){return S.getRow(this.selectedPage)},publishPage(){return w(this,null,function*(){return S.runDocMethod.submit(d({name:this.selectedPage,method:"publish"},this.routeVariables)).then(i=>{let e=i.message;this.getActivePage().dynamic_route,this.pageData&&((e==null?void 0:e.match(/<\w+>/g))||[]).map(n=>n.slice(1,-1)).forEach(n=>{this.routeVariables[n]&&(e=e==null?void 0:e.replace(`<${n}>`,this.routeVariables[n]))}),window.open(`/${e}`,"_blank")})})},savePage(){const i=JSON.stringify(this.getPageData()),e={name:this.selectedPage,draft_blocks:i};S.setValue.submit(e)},setPageData(){const i=this.getActivePage();!i||!i.page_data_script||S.runDocMethod.submit(d({method:"get_page_data",name:i.name},this.routeVariables)).then(e=>{this.pageData=e.message}).catch(()=>{N({text:"There was error in fetching page data",position:"top-right",icon:"disabled",iconClasses:"text-red-500"})})},setRouteVariable(i,e){this.routeVariables[i]=e,localStorage.setItem(`${this.selectedPage}:routeVariables`,JSON.stringify(this.routeVariables)),this.setPageData()},openInDesk(i){window.open(`/app/builder-page/${i.page_name}`,"_blank")}}}),u=ce;export{F as B,pe as H,E as P,B as a,f as b,fe as c,k as d,b as e,Ie as f,Fe as g,I as h,Te as i,Q as j,ye as k,Z as l,Ce as m,ke as n,xe as o,be as p,me as q,Be as r,ge as s,ve as t,u,Se as v,S as w,we as x,Ee as y,ee as z};
//# sourceMappingURL=store.1e709ca5.js.map
