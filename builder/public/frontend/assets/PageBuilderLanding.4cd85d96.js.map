{"version":3,"file":"PageBuilderLanding.4cd85d96.js","sources":["../../../../frontend/src/pages/PageBuilderLanding.vue"],"sourcesContent":["<template>\n\t<div\n\t\tclass=\"toolbar flex h-14 items-center justify-center bg-white p-2 shadow-sm dark:border-b-[1px] dark:border-gray-800 dark:bg-zinc-900\"\n\t\tref=\"toolbar\">\n\t\t<div class=\"absolute left-3 flex items-center\">\n\t\t\t<router-link class=\"flex items-center gap-2\" :to=\"{ name: 'home' }\">\n\t\t\t\t<img src=\"/builder_logo.png\" alt=\"logo\" class=\"h-7\" />\n\t\t\t\t<h1 class=\"text-md mt-[2px] font-semibold leading-5 text-gray-800 dark:text-gray-200\">Builder</h1>\n\t\t\t</router-link>\n\t\t</div>\n\t</div>\n\t<section class=\"max-w-800 m-auto mb-32 flex w-3/4 flex-col pt-10\">\n\t\t<div class=\"mb-6 flex items-center justify-between\">\n\t\t\t<h1 class=\"text-sm font-bold uppercase text-gray-800 dark:text-zinc-400\">My Pages</h1>\n\t\t\t<div class=\"flex gap-4\">\n\t\t\t\t<Input\n\t\t\t\t\tclass=\"h-7 rounded-md text-sm text-gray-800 hover:border-gray-400 focus:border-gray-400 focus:bg-gray-50 focus:ring-0 dark:border-zinc-800 dark:bg-zinc-900 dark:text-zinc-200 dark:focus:border-zinc-200 focus:dark:border-zinc-700\"\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tplaceholder=\"Filter by title or route\"\n\t\t\t\t\tinputClass=\"w-full\"\n\t\t\t\t\tv-model=\"filter\"\n\t\t\t\t\t@input=\"\n\t\t\t\t\t\t(value: string) => {\n\t\t\t\t\t\t\tfilter = value;\n\t\t\t\t\t\t}\n\t\t\t\t\t\" />\n\t\t\t\t<Input\n\t\t\t\t\ttype=\"select\"\n\t\t\t\t\tclass=\"h-7 rounded-md border-gray-400 text-sm text-gray-800 focus:border-gray-400 focus:bg-gray-50 focus:ring-0 dark:border-zinc-800 dark:bg-zinc-900 dark:text-zinc-200 dark:focus:border-zinc-200 focus:dark:border-zinc-700\"\n\t\t\t\t\tinputClass=\"w-32\"\n\t\t\t\t\tv-model=\"typeFilter\"\n\t\t\t\t\t:options=\"[\n\t\t\t\t\t\t{ label: 'All', value: '' },\n\t\t\t\t\t\t{ label: 'Draft', value: 'draft' },\n\t\t\t\t\t\t{ label: 'Published', value: 'published' },\n\t\t\t\t\t\t{ label: 'Unpublished', value: 'unpublished' },\n\t\t\t\t\t]\" />\n\t\t\t\t<router-link :to=\"{ name: 'builder', params: { pageId: 'new' } }\">\n\t\t\t\t\t<Button variant=\"solid\" icon-left=\"plus\">New</Button>\n\t\t\t\t</router-link>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class=\"flex flex-wrap gap-6\">\n\t\t\t<div v-if=\"!webPages.data || !webPages.data.length\" class=\"flex flex-col items-center justify-center\">\n\t\t\t\t<p class=\"mt-4 text-center text-base text-gray-500\">\n\t\t\t\t\tYou don't have any pages yet. Click on the \"+ New\" button to create a new page.\n\t\t\t\t</p>\n\t\t\t</div>\n\t\t\t<div v-else-if=\"!pages.length\" class=\"flex flex-col items-center justify-center\">\n\t\t\t\t<p class=\"mt-4 text-center text-base text-gray-500\">No matching pages found.</p>\n\t\t\t</div>\n\t\t\t<router-link\n\t\t\t\tv-for=\"page in pages\"\n\t\t\t\t:key=\"page.page_name\"\n\t\t\t\t:to=\"{ name: 'builder', params: { pageId: page.page_name } }\"\n\t\t\t\tclass=\"max-w-[250px] flex-grow basis-52\">\n\t\t\t\t<div\n\t\t\t\t\tclass=\"group relative mr-2 w-full overflow-hidden rounded-md shadow hover:cursor-pointer dark:border-zinc-700 dark:bg-zinc-900 dark:text-zinc-200\">\n\t\t\t\t\t<img\n\t\t\t\t\t\twidth=\"250\"\n\t\t\t\t\t\theight=\"140\"\n\t\t\t\t\t\t:src=\"page.preview\"\n\t\t\t\t\t\tonerror=\"this.src='/assets/builder/images/fallback.png'\"\n\t\t\t\t\t\tclass=\"w-full overflow-hidden rounded-lg bg-gray-50 object-cover p-2 dark:bg-zinc-900\" />\n\t\t\t\t\t<div class=\"flex items-center justify-between border-t-[1px] px-3 dark:border-zinc-800\">\n\t\t\t\t\t\t<span class=\"inline-block max-w-[160px] py-2 text-sm text-gray-700 dark:text-zinc-200\">\n\t\t\t\t\t\t\t<div class=\"flex items-center gap-1\">\n\t\t\t\t\t\t\t\t<p class=\"truncate\">\n\t\t\t\t\t\t\t\t\t{{ page.page_title || page.page_name }}\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t<!-- <div class=\"flex gap-1\">\n\t\t\t\t\t\t\t\t\t<Tooltip text=\"Draft\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"h-2 w-2 rounded-full bg-gray-500\" v-show=\"page.draft_blocks\"></div>\n\t\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t\t<Tooltip text=\"Published\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"h-2 w-2 rounded-full bg-green-600\" v-show=\"page.published\"></div>\n\t\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t</div> -->\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<UseTimeAgo v-slot=\"{ timeAgo }\" :time=\"page.creation\">\n\t\t\t\t\t\t\t\t<p class=\"mt-1 block text-xs text-gray-500\">\n\t\t\t\t\t\t\t\t\t{{ timeAgo }}\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t</UseTimeAgo>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<Dropdown\n\t\t\t\t\t\t\t:options=\"[\n\t\t\t\t\t\t\t\t{ label: 'Duplicate', onClick: () => duplicatePage(page), icon: 'copy' },\n\t\t\t\t\t\t\t\t{ label: 'View in Desk', onClick: () => store.openInDesk(page), icon: 'arrow-up-right' },\n\t\t\t\t\t\t\t\t{ label: 'Delete', onClick: () => deletePage(page), icon: 'trash' },\n\t\t\t\t\t\t\t]\"\n\t\t\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\t\t\tplacement=\"right\">\n\t\t\t\t\t\t\t<template v-slot=\"{ open }\">\n\t\t\t\t\t\t\t\t<FeatherIcon\n\t\t\t\t\t\t\t\t\tname=\"more-vertical\"\n\t\t\t\t\t\t\t\t\tclass=\"h-4 w-4 text-gray-500 group-hover:text-gray-700\"\n\t\t\t\t\t\t\t\t\t@click=\"open\"></FeatherIcon>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t</Dropdown>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</router-link>\n\t\t</div>\n\t</section>\n</template>\n<script setup lang=\"ts\">\nimport { webPages } from \"@/data/webPage\";\nimport useStore from \"@/store\";\nimport { BuilderPage } from \"@/types/Builder/BuilderPage\";\nimport { confirm } from \"@/utils/helpers\";\nimport { UseTimeAgo } from \"@vueuse/components\";\nimport { Dropdown } from \"frappe-ui\";\nimport { computed, onActivated, ref } from \"vue\";\n\nconst store = useStore();\nconst filter = ref(\"\");\nconst typeFilter = ref(\"\");\n\nconst pages = computed(() =>\n\t(webPages.data || []).filter((page: BuilderPage) => {\n\t\tif (typeFilter.value) {\n\t\t\tif (\n\t\t\t\t(typeFilter.value === \"published\" && !page.published) ||\n\t\t\t\t(typeFilter.value === \"unpublished\" && page.published) ||\n\t\t\t\t(typeFilter.value === \"draft\" && !page.draft_blocks)\n\t\t\t) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\tif (filter.value) {\n\t\t\treturn (\n\t\t\t\tpage.page_title?.toLowerCase().includes(filter.value.toLowerCase()) ||\n\t\t\t\tpage.route?.toLowerCase().includes(filter.value.toLowerCase())\n\t\t\t);\n\t\t} else {\n\t\t\treturn true;\n\t\t}\n\t})\n);\n\nconst deletePage = async (page: BuilderPage) => {\n\tconst confirmed = await confirm(`Are you sure you want to delete Page: ${page.page_name}?`);\n\tif (confirmed) {\n\t\tawait webPages.delete.submit(page.name);\n\t}\n};\n\nconst duplicatePage = async (page: BuilderPage) => {\n\tconst pageCopy = { ...page };\n\tpageCopy.page_name = `${page.page_name}-copy`;\n\tpageCopy.page_title = `${page.page_title} Copy`;\n\tawait webPages.insert.submit(pageCopy);\n};\n\nonActivated(() => {\n\twebPages.fetch();\n});\n</script>\n"],"names":["store","useStore","filter","ref","typeFilter","pages","computed","webPages","page","_a","_b","deletePage","__async","confirm","duplicatePage","pageCopy","__spreadValues","onActivated"],"mappings":"wyEAmHA,MAAMA,EAAQC,IACRC,EAASC,EAAI,EAAE,EACfC,EAAaD,EAAI,EAAE,EAEnBE,EAAQC,EAAS,KACrBC,EAAS,MAAQ,CAAI,GAAA,OAAQC,GAAsB,SACnD,OAAIJ,EAAW,QAEZA,EAAW,QAAU,aAAe,CAACI,EAAK,WAC1CJ,EAAW,QAAU,eAAiBI,EAAK,WAC3CJ,EAAW,QAAU,SAAW,CAACI,EAAK,cAEhC,GAGLN,EAAO,QAETO,EAAAD,EAAK,aAAL,YAAAC,EAAiB,cAAc,SAASP,EAAO,MAAM,YAAa,OAClEQ,EAAAF,EAAK,QAAL,YAAAE,EAAY,cAAc,SAASR,EAAO,MAAM,gBAG1C,EACR,CACA,CAAA,EAGIS,EAAoBH,GAAsBI,EAAA,uBAC7B,MAAMC,EAAQ,yCAAyCL,EAAK,YAAY,KAEzF,MAAMD,EAAS,OAAO,OAAOC,EAAK,IAAI,EACvC,GAGKM,EAAuBN,GAAsBI,EAAA,sBAC5C,MAAAG,EAAWC,EAAA,GAAKR,GACbO,EAAA,UAAY,GAAGP,EAAK,iBACpBO,EAAA,WAAa,GAAGP,EAAK,kBACxB,MAAAD,EAAS,OAAO,OAAOQ,CAAQ,CAAA,GAGtC,OAAAE,EAAY,IAAM,CACjBV,EAAS,MAAM,CAAA,CACf"}