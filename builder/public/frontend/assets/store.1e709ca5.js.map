{"version":3,"file":"store.1e709ca5.js","sources":["../../../../frontend/src/data/webPage.ts","../../../../frontend/src/utils/helpers.ts","../../../../frontend/src/utils/block.ts","../../../../frontend/src/data/webComponent.ts","../../../../frontend/src/utils/blockTemplate.ts","../../../../node_modules/lucide-vue-next/dist/esm/defaultAttributes.js","../../../../node_modules/lucide-vue-next/dist/esm/createLucideIcon.js","../../../../node_modules/lucide-vue-next/dist/esm/icons/help-circle.js","../../../../node_modules/lucide-vue-next/dist/esm/icons/layers.js","../../../../node_modules/lucide-vue-next/dist/esm/icons/layout-panel-left.js","../../../../node_modules/lucide-vue-next/dist/esm/icons/shapes.js","../../../../node_modules/lucide-vue-next/dist/esm/icons/sparkles.js","../../../../frontend/src/store.ts"],"sourcesContent":["import { createListResource } from \"frappe-ui\";\n\nconst webPages = createListResource({\n\tmethod: \"GET\",\n\tdoctype: \"Builder Page\",\n\tfields: [\n\t\t\"name\",\n\t\t\"route\",\n\t\t\"blocks\",\n\t\t\"page_name\",\n\t\t\"preview\",\n\t\t\"page_title\",\n\t\t\"creation\",\n\t\t\"page_data_script\",\n\t\t\"draft_blocks\",\n\t\t\"published\",\n\t\t\"dynamic_route\",\n\t\t\"client_script\",\n\t\t\"style\",\n\t\t\"canvas_position\",\n\t\t\"color_palette\",\n\t],\n\tcache: \"pages\",\n\torderBy: \"creation desc\",\n\tpageLength: 50,\n});\n\nexport { webPages };\n","import useStore from \"@/store\";\nimport Block from \"./block\";\n\nfunction getNumberFromPx(px: string | number | null | undefined): number {\n\tif (!px) {\n\t\treturn 0;\n\t}\n\tif (typeof px === \"number\") {\n\t\treturn px;\n\t}\n\treturn Number(px.replace(\"px\", \"\"));\n}\n\nfunction smoothTransition(parent : Block, children : Block)\n{\n\tconst parentPosition = parent.getPosition();\n\tconst childrenPosition = children.getPosition();\n\n\n\treturn {x : PixelToNumber(childrenPosition.x as string) + PixelToNumber(parentPosition.x as string), y :PixelToNumber(childrenPosition.y as string) + PixelToNumber(parentPosition.y as string)};\n}\n\nfunction addPxToNumber(number: number, round: boolean = true): string {\n\tnumber = round ? Math.round(number) : number;\n\treturn `${number}px`;\n}\nfunction PixelToNumber(px : string | number) {\n\tif(typeof px === 'number')return px;\n\treturn Number(px.replace(\"px\", \"\"));\n}\n\nfunction PixelAfterZoom(px : string | number)\n{\n\tconst store = useStore()\n\tstore.blockEditorCanvas.scale;\n\tif(typeof px === 'number') {\n\t\treturn px * store.blockEditorCanvas.scale;\n\t}else{\n\t\treturn Number(px.replace(\"px\", \"\")) * store.blockEditorCanvas.scale;\n\t}\n}\n\nfunction HexToHSV(color: HashString): { h: number; s: number; v: number, a:number } {\n\tconst [r, g, b, a] = color\n\t\t.replace(\"#\", \"\")\n\t\t.match(/.{1,2}/g)\n\t\t?.map((x) => parseInt(x, 16)) || [0, 0, 0,1];\n\n\tconst max = Math.max(r, g, b);\n\tconst min = Math.min(r, g, b);\n\tconst v = max / 255;\n\tconst d = max - min;\n\tconst s = max === 0 ? 0 : d / max;\n\tconst h =\n\t\tmax === min\n\t\t\t? 0\n\t\t\t: max === r\n\t\t\t? (g - b) / d + (g < b ? 6 : 0)\n\t\t\t: max === g\n\t\t\t? (b - r) / d + 2\n\t\t\t: (r - g) / d + 4;\n\tconst alpha = a / 255;\n\treturn { h: h * 60, s, v, a:alpha };\n}\n\nfunction HSVToHex(h: number, s: number, v: number, a?:number): HashString {\n\ts /= 100;\n\tv /= 100;\n\th /= 360;\n\ta = a === undefined ? 1 : a;\n\n\tlet r = 0,\n\t\tg = 0,\n\t\tb = 0;\n\n\tlet i = Math.floor(h * 6);\n\tlet f = h * 6 - i;\n\tlet p = v * (1 - s);\n\tlet q = v * (1 - f * s);\n\tlet t = v * (1 - (1 - f) * s);\n\n\tswitch (i % 6) {\n\t\tcase 0:\n\t\t\t(r = v), (g = t), (b = p);\n\t\t\tbreak;\n\t\tcase 1:\n\t\t\t(r = q), (g = v), (b = p);\n\t\t\tbreak;\n\t\tcase 2:\n\t\t\t(r = p), (g = v), (b = t);\n\t\t\tbreak;\n\t\tcase 3:\n\t\t\t(r = p), (g = q), (b = v);\n\t\t\tbreak;\n\t\tcase 4:\n\t\t\t(r = t), (g = p), (b = v);\n\t\t\tbreak;\n\t\tcase 5:\n\t\t\t(r = v), (g = p), (b = q);\n\t\t\tbreak;\n\t}\n\tr = Math.round(r * 255);\n\tg = Math.round(g * 255);\n\tb = Math.round(b * 255);\n\ta = Math.round(a * 255);\n\treturn `#${[r, g, b, a].map((x) => x.toString(16).padStart(2, \"0\")).join(\"\")}`;\n}\n\nfunction getRandomColor() {\n\treturn HSVToHex(Math.random() * 360, 25, 100,1);\n}\n\nasync function confirm(message: string): Promise<boolean> {\n\treturn new Promise((resolve) => {\n\t\tconst confirmed = window.confirm(message);\n\t\tresolve(confirmed);\n\t});\n}\n\nfunction getTextContent(html: string | null) {\n\tif (!html || !isHTMLString(html)) {\n\t\treturn html || \"\";\n\t}\n\tconst tmp = document.createElement(\"div\");\n\ttmp.innerHTML = html || \"\";\n\tconst textContent = tmp.textContent || tmp.innerText || \"\";\n\ttmp.remove();\n\treturn textContent;\n}\n\nfunction RGBToHex(rgb: RGBString ): HashString {\n\tconst [r, g, b,a] = rgb\n\t\t.replace(\"rgba(\", \"\")\n\t\t.replace(\")\", \"\")\n\t\t.split(\",\")\n\t\t.map((x) => parseInt(x));\n\treturn `#${[r, g, b].map((x) => x.toString(16).padStart(2, \"0\")).join(\"\")}${Math.round(a * 255).toString(16).padStart(2, \"0\")}`;\n}\n\n\nfunction getRGB(color: HashString | RGBString | string | null): HashString | null {\n\tif (!color) {\n\t\treturn null;\n\t}\n\tif(color.startsWith(\"#\"))color = color.replace(\"#\", \"\");\n\tif (color.startsWith(\"rgba\")) {\n\t\treturn RGBToHex(color as RGBString);\n\t} else if (!color.startsWith(\"#\") && color.match(/\\b[a-fA-F0-9]{3,8}\\b/g)) {\n\t\tif(color.length == 3)\n\t\t{\n\t\t\treturn `#${color[0]}${color[0]}${color[1]}${color[1]}${color[2]}${color[2]}FF` as HashString;\n\t\t}if(color.length == 6)\n\t\t{\n\t\t\treturn `#${color}FF` as HashString;\n\t\t}\n\t\treturn `#${color}` as HashString;\n\t}\n\treturn null;\n}\n\nfunction updateOpacityInHex(color: HashString, opacity: number) {\n\tif (color.startsWith(\"#\") && color.match(/\\b[a-fA-F0-9]{3,9}\\b/g)) {\n\t\treturn color.slice(0,7) + Math.round(opacity * 255).toString(16).padStart(2, \"0\");\n\t}\n\treturn color;\n}\n\nfunction validateColor(color: string) {\n\tconst regex = /^#?([A-Fa-f0-9]{0,8})$/;\n\treturn regex.test(color);\n}\n\nfunction validateOpacity(opacity: string) {\n\tconst regex = /^(100|[1-9]?[0-9])$/;\n\treturn regex.test(opacity);\n}\n\nfunction getFirstColorFromGradient(gradient : string, all : boolean = false) {\n\tif(!gradient)return '#FFFFFFFF';\n\tif(!gradient.includes('gradient'))return null;\n    const match = gradient.match(/#[a-fA-F0-9]{8}/);\n    return match ? match[0] : null;\n}\nfunction isColorDark(hexColor : string) {\n\tif(!hexColor)return false;\n\thexColor.replace(\"#\", \"\");\n    const rgb = parseInt(hexColor.slice(1), 16);   // convert rrggbb to decimal\n    const r = (rgb >> 16) & 0xff;  // extract red\n    const g = (rgb >>  8) & 0xff;  // extract green\n    const b = (rgb >>  0) & 0xff;  // extract blue\n\n    const luma = 0.2126 * r + 0.7152 * g + 0.0722 * b; // per ITU-R BT.709\n\n    return luma < 128;\n}\n\nfunction getAllColorsFromGradient(gradient : string) {\n\tconst match = gradient.match(/#[a-fA-F0-9]{3,8}/g);\n\treturn match ? match : null;\n}\n\nfunction getGradientType(gradient : string) {\n\tconst match = gradient.match(/linear|radial|conic/);\n\treturn match ? match[0] : null;\n}\n\nfunction replaceColorsInGradient(gradient : string, colors : string[]) {\n\tconst allColors = getAllColorsFromGradient(gradient);\n    if (allColors && allColors.length ==  colors.length) {\n        gradient = gradient.replace(allColors[0], colors[0]);\n        gradient = gradient.replace(allColors[1], colors[1]);\n    }\n    return gradient;\n}\n\nfunction getOpacity(color: HashString | RGBString | string | null): number {\n\tif (!color) {\n\t\treturn 1;\n\t}\n\tif (color.startsWith(\"rgba\")) {\n\t\treturn Number(Number(color.replace(\"rgba(\", \"\").replace(\")\", \"\").split(\",\")[3]).toFixed(2));\n\t} else if (!color.startsWith(\"#\") && color.match(/\\b[a-fA-F0-9]{3,6}\\b/g)) {\n\t\treturn 1;\n\t}\n\telse if (color.startsWith(\"#\") && color.length === 9) {\n\t\treturn Number((parseInt(color.slice(7, 9), 16) / 255).toFixed(2));\n\t}else if (color.startsWith(\"l\")) {\n\t\treturn Number((parseInt(getFirstColorFromGradient(color)!.slice(7, 9), 16) / 255).toFixed(2));\n\t}\n\treturn 1;\n}\n\nfunction isHTMLString(str: string) {\n\treturn /<[a-z][\\s\\S]*>/i.test(str);\n}\n\nfunction copyToClipboard(text: string | object, e: ClipboardEvent, copyFormat = \"text/plain\") {\n\tif (typeof text !== \"string\") {\n\t\ttext = JSON.stringify(text);\n\t}\n\te.clipboardData?.setData(copyFormat, text);\n}\n\nfunction stripExtension(string: string) {\n\tconst lastDotPosition = string.lastIndexOf(\".\");\n\tif (lastDotPosition === -1) {\n\t\treturn string;\n\t}\n\treturn string.substr(0, lastDotPosition);\n}\n\nfunction findNearestSiblingIndex(e: MouseEvent) {\n\tlet nearestElementIndex = 0;\n\tlet minDistance = Number.MAX_VALUE;\n\tlet parent = e.target as HTMLElement;\n\n\tconst elements = Array.from(parent.children);\n\telements.forEach(function (element, index) {\n\t\tconst rect = element.getBoundingClientRect();\n\t\tconst centerX = rect.left + rect.width / 2;\n\t\tconst centerY = rect.top + rect.height / 2;\n\n\t\tconst distance = Math.sqrt(Math.pow(centerX - e.clientX, 2) + Math.pow(centerY - e.clientY, 2));\n\t\tif (distance < minDistance) {\n\t\t\tminDistance = distance;\n\t\t\tnearestElementIndex = index;\n\t\t\tconst positionBitmask = element.compareDocumentPosition(e.target as Node);\n\t\t\t// sourcery skip: possible-incorrect-bitwise-operator\n\t\t\tif (positionBitmask & Node.DOCUMENT_POSITION_PRECEDING) {\n\t\t\t\t// before\n\t\t\t} else {\n\t\t\t\tnearestElementIndex += 1;\n\t\t\t}\n\t\t}\n\t});\n\treturn nearestElementIndex;\n}\n\n// converts border-color to borderColor\nfunction kebabToCamelCase(str: string) {\n\treturn str.replace(/-([a-z])/g, function (g) {\n\t\treturn g[1].toUpperCase();\n\t});\n}\n\nfunction isJSONString(str: string) {\n\ttry {\n\t\tJSON.parse(str);\n\t} catch (e) {\n\t\treturn false;\n\t}\n\treturn true;\n}\n\nfunction isTargetEditable(e: Event) {\n\tconst target = e.target as HTMLElement;\n\tconst isEditable = target.isContentEditable;\n\tconst isInput = target.tagName === \"INPUT\" || target.tagName === \"TEXTAREA\";\n\treturn isEditable || isInput;\n}\nfunction getDataForKey(datum: Object, key: string) {\n\tconst data = Object.assign({}, datum);\n\treturn key.split(\".\").reduce((d, key) => (d ? d[key ] : null), data) as string;\n}\n\nexport {\n\tPixelAfterZoom,\n\tPixelToNumber,\n\tvalidateColor,\n\tvalidateOpacity,\n\tisColorDark,\n\tgetGradientType,\n\tgetAllColorsFromGradient,\n\treplaceColorsInGradient,\n\tgetFirstColorFromGradient,\n\tupdateOpacityInHex,\n\tgetOpacity,\n\tHSVToHex,\n\tHexToHSV,\n\tRGBToHex,\n\taddPxToNumber,\n\tconfirm,\n\tsmoothTransition,\n\tcopyToClipboard,\n\tfindNearestSiblingIndex,\n\tgetDataForKey,\n\tgetNumberFromPx,\n\tgetRGB,\n\tgetRandomColor,\n\tgetTextContent,\n\tisHTMLString,\n\tisJSONString,\n\tisTargetEditable,\n\tkebabToCamelCase,\n\tstripExtension,\n};\n","import useStore from \"@/store\";\nimport { Editor } from \"@tiptap/vue-3\";\nimport { clamp } from \"@vueuse/core\";\nimport { CSSProperties, nextTick, reactive } from \"vue\";\nimport { PixelAfterZoom, addPxToNumber, getNumberFromPx, getTextContent, kebabToCamelCase } from \"./helpers\";\n\nexport type styleProperty = keyof CSSProperties;\n\nexport interface BlockDataKey {\n\tkey?: string;\n\ttype?: string;\n\tproperty?: string;\n}\n\nfunction resetBlock(\n\tblock: Block | BlockOptions,\n\textendedFromComponent: string | undefined,\n\tchildren: Block[]\n) {\n\tdelete block.innerHTML;\n\tdelete block.element;\n\tblock.blockId = block.generateId();\n\tblock.baseStyles = {};\n\tblock.rawStyles = {};\n\tblock.mobileStyles = {};\n\tblock.tabletStyles = {};\n\tblock.attributes = {};\n\tblock.classes = [];\n\tblock.children?.forEach((child, index) => {\n\t\tchild.isChildOfComponent = extendedFromComponent;\n\t\tconst componentChild = children[index];\n\t\tif (componentChild) {\n\t\t\tchild.referenceBlockId = componentChild.blockId;\n\t\t\tresetBlock(child, extendedFromComponent, componentChild.children);\n\t\t}\n\t});\n}\n\nclass Block implements BlockOptions {\n\tblockId: string;\n\tchildren: Array<Block>;\n\tbaseStyles: BlockStyleMap;\n\trawStyles: BlockStyleMap;\n\tmobileStyles: BlockStyleMap;\n\ttabletStyles: BlockStyleMap;\n\tattributes: BlockAttributeMap;\n\tclasses: Array<string>;\n\tdataKey?: BlockDataKey | null = null;\n\tblockName?: string;\n\telement?: string;\n\tdraggable?: boolean;\n\tinnerText?: string;\n\tout: boolean = false;\n\tinnerHTML?: string;\n\textendedFromComponent?: string;\n\toriginalElement?: string | undefined;\n\tisChildOfComponent?: string;\n\treferenceBlockId?: string;\n\tisRepeaterBlock?: boolean;\n\tgradient?: string;\n\tconstructor(options: BlockOptions) {\n\t\tthis.element = options.element;\n\t\tthis.innerHTML = options.innerHTML;\n\t\tthis.extendedFromComponent = options.extendedFromComponent;\n\t\tthis.isRepeaterBlock = options.isRepeaterBlock;\n\t\tthis.isChildOfComponent = options.isChildOfComponent;\n\t\tthis.referenceBlockId = options.referenceBlockId;\n\n\t\tthis.dataKey = options.dataKey || null;\n\n\t\tif (options.innerText) {\n\t\t\tthis.innerHTML = options.innerText;\n\t\t}\n\n\t\tthis.originalElement = options.originalElement;\n\n\t\tif (!options.blockId || options.blockId === \"root\") {\n\t\t\tthis.blockId = this.generateId();\n\t\t} else {\n\t\t\tthis.blockId = options.blockId;\n\t\t}\n\t\tthis.children = (options.children || []).map((child: BlockOptions) => {\n\t\t\treturn reactive(new Block(child));\n\t\t});\n\n\t\tthis.baseStyles = reactive(options.styles || options.baseStyles || {});\n\t\tthis.rawStyles = reactive(options.rawStyles || {});\n\t\tthis.mobileStyles = reactive(options.mobileStyles || {});\n\t\tthis.tabletStyles = reactive(options.tabletStyles || {});\n\t\tthis.attributes = reactive(options.attributes || {});\n\n\t\tthis.blockName = options.blockName;\n\t\tdelete this.attributes.style;\n\t\tthis.classes = options.classes || [];\n\n\t\tif (this.isText() && !this.classes.includes(\"__text_block__\")) {\n\t\t\tthis.classes.push(\"__text_block__\");\n\t\t}\n\n\t\tconst gr = this.baseStyles.background as string ?? '' ;\n\t\tif(gr.includes('gradient')) {\n\t\t\tthis.gradient = gr.match(/linear|radial|conic/)![0] ;\n\t\t}\n\n\t\tif (this.isRoot()) {\n\t\t\tthis.blockId = \"root\";\n\t\t\tthis.draggable = false;\n\t\t\tthis.setBaseStyle(\"minHeight\", \"100vh\");\n\t\t}\n\t}\n\tsetOut(out: boolean) {\n\t\tthis.out = out;\n\t}\n\tisOut() {\n\t\treturn this.out;\n\t}\n\tgetStyles(breakpoint: string = \"desktop\") {\n\t\tlet styleObj = {};\n\t\tif (this.isExtendedFromComponent()) {\n\t\t\tstyleObj = this.getComponentStyles(breakpoint);\n\t\t}\n\t\tstyleObj = { ...styleObj, ...this.baseStyles };\n\t\tif (breakpoint === \"mobile\") {\n\t\t\tstyleObj = { ...styleObj, ...this.mobileStyles };\n\t\t} else if (breakpoint === \"tablet\") {\n\t\t\tstyleObj = { ...styleObj, ...this.tabletStyles };\n\t\t}\n\t\tstyleObj = { ...styleObj, ...this.rawStyles };\n\t\treturn styleObj;\n\t}\n\tgetComponent() {\n\t\tconst store = useStore();\n\t\tif (this.extendedFromComponent) {\n\t\t\treturn store.getComponentBlock(this.extendedFromComponent as string);\n\t\t}\n\t\tif (this.isChildOfComponent) {\n\t\t\tconst componentBlock = store.getComponentBlock(this.isChildOfComponent as string);\n\t\t\treturn (\n\t\t\t\tstore.findBlock(this.referenceBlockId as string, [componentBlock]) ||\n\t\t\t\tstore.findBlock(this.blockId as string, [componentBlock]) ||\n\t\t\t\tnew Block({})\n\t\t\t);\n\t\t}\n\t\treturn this;\n\t}\n\tgetComponentStyles(breakpoint: string): BlockStyleMap {\n\t\treturn this.getComponent()?.getStyles(breakpoint);\n\t}\n\tgetAttributes(): BlockAttributeMap {\n\t\tlet attributes = {};\n\t\tif (this.isExtendedFromComponent()) {\n\t\t\tattributes = this.getComponentAttributes();\n\t\t}\n\t\tattributes = { ...attributes, ...this.attributes };\n\t\treturn attributes;\n\t}\n\tgetComponentAttributes() {\n\t\treturn this.getComponent()?.attributes || {};\n\t}\n\tgetClasses() {\n\t\tlet classes = [] as Array<string>;\n\t\tif (this.isExtendedFromComponent()) {\n\t\t\tclasses = this.getComponentClasses();\n\t\t}\n\t\tclasses = [...classes, ...this.classes];\n\t\treturn classes;\n\t}\n\tgetComponentClasses() {\n\t\treturn this.getComponent()?.classes || [];\n\t}\n\tgetChildren() {\n\t\treturn this.children;\n\t}\n\thasChildren() {\n\t\treturn this.getChildren().length > 0;\n\t}\n\tgetComponentChildren() {\n\t\treturn this.getComponent()?.children || [];\n\t}\n\n\tgetBlockDescription() {\n\t\tif (this.isExtendedFromComponent() && !this.isChildOfComponentBlock()) {\n\t\t\treturn this.getComponentBlockDescription();\n\t\t}\n\t\tif (this.isHTML()) {\n\t\t\treturn \"raw\";\n\t\t}\n\t\tlet description = this.blockName || this.originalElement || this.getElement();\n\t\tif (this.getTextContent() && !this.blockName) {\n\t\t\tdescription += \" | \" + this.getTextContent();\n\t\t}\n\t\treturn description;\n\t}\n\tgetComponentBlockDescription() {\n\t\tconst store = useStore();\n\t\treturn store.getComponentName(this.extendedFromComponent as string);\n\t}\n\tgetTextContent() {\n\t\tlet editor = this.getEditor();\n\t\tlet text = \"\";\n\t\tif (this.isText() && editor) {\n\t\t\ttext = editor.getText();\n\t\t}\n\t\treturn text || getTextContent(this.getInnerHTML() || \"\");\n\t}\n\tisImage() {\n\t\treturn this.getElement() === \"img\";\n\t}\n\tisButton() {\n\t\treturn this.getElement() === \"button\";\n\t}\n\tisLink() {\n\t\treturn this.getElement() === \"a\";\n\t}\n\tisSVG() {\n\t\treturn this.getElement() === \"svg\" || this.getInnerHTML()?.startsWith(\"<svg\");\n\t}\n\tisText() {\n\t\treturn [\"span\", \"h1\", \"p\", \"b\", \"h2\", \"h3\", \"h4\", \"h5\", \"h6\", \"label\", \"a\"].includes(\n\t\t\tthis.getElement() as string\n\t\t);\n\t}\n\tisContainer() {\n\t\treturn [\"section\", \"div\"].includes(this.getElement() as string);\n\t}\n\tisInput() {\n\t\treturn this.originalElement === \"input\" || this.getElement() === \"input\";\n\t}\n\tsetStyle(style: styleProperty, value: StyleValue) {\n\t\tconst store = useStore();\n\t\tlet styleObj = this.baseStyles;\n\t\tstyle = kebabToCamelCase(style) as styleProperty;\n\t\tif (store.activeBreakpoint === \"mobile\") {\n\t\t\tstyleObj = this.mobileStyles;\n\t\t} else if (store.activeBreakpoint === \"tablet\") {\n\t\t\tstyleObj = this.tabletStyles;\n\t\t}\n\t\tif (value === null || value === \"\") {\n\t\t\tdelete styleObj[style];\n\t\t\treturn;\n\t\t}\n\t\tstyleObj[style] = value;\n\t}\n\tsetAttribute(attribute: string, value: string) {\n\t\tthis.attributes[attribute] = value;\n\t}\n\tgetAttribute(attribute: string) {\n\t\treturn this.getAttributes()[attribute];\n\t}\n\tremoveStyle(style: styleProperty) {\n\t\tdelete this.baseStyles[style];\n\t\tdelete this.mobileStyles[style];\n\t\tdelete this.tabletStyles[style];\n\t}\n\tsetBaseStyle(style: styleProperty, value: StyleValue) {\n\t\tstyle = kebabToCamelCase(style) as styleProperty;\n\t\tthis.baseStyles[style] = value;\n\t}\n\tgetStyle(style: styleProperty) {\n\t\tconst store = useStore();\n\t\tif (store.activeBreakpoint === \"mobile\") {\n\t\t\treturn this.mobileStyles[style] || this.baseStyles[style];\n\t\t} else if (store.activeBreakpoint === \"tablet\") {\n\t\t\treturn this.tabletStyles[style] || this.baseStyles[style];\n\t\t}\n\t\treturn this.baseStyles[style];\n\t}\n\tgenerateId() {\n\t\treturn Math.random().toString(36).substr(2, 9);\n\t}\n\tgetIcon() {\n\t\tswitch (true) {\n\t\t\tcase this.isRoot():\n\t\t\t\treturn \"hash\";\n\t\t\tcase this.isRepeater():\n\t\t\t\treturn \"database\";\n\t\t\tcase this.isSVG():\n\t\t\t\treturn \"aperture\";\n\t\t\tcase this.isHTML():\n\t\t\t\treturn \"code\";\n\t\t\tcase this.isLink():\n\t\t\t\treturn \"link\";\n\t\t\tcase this.isText():\n\t\t\t\treturn \"type\";\n\t\t\tcase this.isContainer() && this.isRow():\n\t\t\t\treturn \"columns\";\n\t\t\tcase this.isContainer() && this.isColumn():\n\t\t\t\treturn \"credit-card\";\n\t\t\tcase this.isContainer():\n\t\t\t\treturn \"square\";\n\t\t\tcase this.isImage():\n\t\t\t\treturn \"image\";\n\n\t\t\tdefault:\n\t\t\t\treturn \"square\";\n\t\t}\n\t}\n\tisRoot() {\n\t\treturn this.originalElement === \"body\";\n\t}\n\tisSection() {\n\t\treturn this.getElement() === \"section\";\n\t}\n\tgetTag(): string {\n\t\tif (this.isButton()) {\n\t\t\treturn \"div\";\n\t\t}\n\t\treturn this.getElement() || \"div\";\n\t}\n\tgetComponentTag() {\n\t\treturn this.getComponent()?.getTag() || \"div\";\n\t}\n\tisDiv() {\n\t\treturn this.getElement() === \"div\";\n\t}\n\tgetStylesCopy() {\n\t\treturn {\n\t\t\tbaseStyles: Object.assign({}, this.baseStyles),\n\t\t\tmobileStyles: Object.assign({}, this.mobileStyles),\n\t\t\ttabletStyles: Object.assign({}, this.tabletStyles),\n\t\t};\n\t}\n\tisHovered(): boolean {\n\t\tconst store = useStore();\n\t\treturn store.hoveredBlock === this.blockId;\n\t}\n\tisSelected(): boolean {\n\t\tconst store = useStore();\n\t\treturn store.selectedBlocks.some((block: Block) => block.blockId === this.blockId);\n\t}\n\tisMovable(): boolean {\n\t\treturn this.getStyle(\"position\") === \"absolute\";\n\t}\n\tfreemove(x: number, y: number ) {\n\t\tconst store = useStore();\n\t\tstore.clearSelection();\n\t\tthis.setStyle(\"left\", addPxToNumber(x));\n\t\tthis.setStyle(\"top\", addPxToNumber(y));\n\t}\n\tmove(direction: \"up\" | \"left\" | \"down\" | \"right\") {\n\t\tif (!this.isMovable()) {\n\t\t\treturn;\n\t\t}\n\t\tlet top = getNumberFromPx(this.getStyle(\"top\")) || 0;\n\t\tlet left = getNumberFromPx(this.getStyle(\"left\")) || 0;\n\t\tif (direction === \"up\") {\n\t\t\ttop -= 10;\n\t\t\tthis.setStyle(\"top\", addPxToNumber(top));\n\t\t} else if (direction === \"down\") {\n\t\t\ttop += 10;\n\t\t\tthis.setStyle(\"top\", addPxToNumber(top));\n\t\t} else if (direction === \"left\") {\n\t\t\tleft -= 10;\n\t\t\tthis.setStyle(\"left\", addPxToNumber(left));\n\t\t} else if (direction === \"right\") {\n\t\t\tleft += 10;\n\t\t\tthis.setStyle(\"left\", addPxToNumber(left));\n\t\t}\n\t}\n\taddChild(child: BlockOptions, index?: number) {\n\t\tif (index === undefined) {\n\t\t\tindex = this.children.length;\n\t\t}\n\t\tindex = clamp(index, 0, this.children.length);\n\n\t\tconst childBlock = reactive(new Block(child));\n\t\tthis.children.splice(index, 0, childBlock);\n\t\tchildBlock.selectBlock();\n\t\tif (childBlock.isText()) {\n\t\t\tchildBlock.makeBlockEditable();\n\t\t}\n\t\treturn childBlock;\n\t}\n\tsetPosition(x: number, y: number) {\n\t\tthis.setStyle(\"left\", addPxToNumber(x));\n\t\tthis.setStyle(\"top\", addPxToNumber(y));\n\t}\n\tremoveChild(child: Block) {\n\t\tconst index = this.getChildIndex(child);\n\t\tif (index > -1) {\n\t\t\tthis.children.splice(index, 1);\n\t\t}\n\t}\n\tgetChildIndex(child: Block) {\n\t\treturn this.children.findIndex((block) => block.blockId === child.blockId);\n\t}\n\taddChildAfter(child: BlockOptions, siblingBlock: Block) {\n\t\tconst siblingIndex = this.getChildIndex(siblingBlock);\n\t\treturn this.addChild(child, siblingIndex + 1);\n\t}\n\tgetEditorStyles() {\n\t\tconst styles = reactive({} as BlockStyleMap);\n\n\t\tif (this.isRoot()) {\n\t\t\tstyles.width = \"inherit\";\n\t\t\tstyles.overflowX = \"hidden\";\n\t\t}\n\n\t\tif (this.isImage() && !this.getAttribute(\"src\")) {\n\t\t\tstyles.background = `repeating-linear-gradient(45deg, rgba(180, 180, 180, 0.8) 0px, rgba(180, 180, 180, 0.8) 1px, rgba(255, 255, 255, 0.2) 0px, rgba(255, 255, 255, 0.2) 50%)`;\n\t\t\tstyles.backgroundSize = \"16px 16px\";\n\t\t}\n\n\t\tif (this.isButton() && this.children.length === 0) {\n\t\t\tstyles.display = \"flex\";\n\t\t\tstyles.alignItems = \"center\";\n\t\t\tstyles.justifyContent = \"center\";\n\t\t}\n\n\t\treturn styles;\n\t}\n\tselectBlock() {\n\t\tconst store = useStore();\n\t\tstore.selectedBlocks = [this];\n\t}\n\ttoggleSelectBlock() {\n\t\tconst store = useStore();\n\t\tif (this.isSelected()) {\n\t\t\tstore.selectedBlocks = store.selectedBlocks.filter((block: Block) => block.blockId !== this.blockId);\n\t\t} else {\n\t\t\tstore.selectedBlocks.push(this);\n\t\t}\n\t}\n\tgetParentBlock(): Block | null {\n\t\tconst store = useStore();\n\t\treturn store.findParentBlock(this.blockId);\n\t}\n\tcanHaveChildren(): boolean {\n\t\treturn this.isContainer() || this.isRoot() || this.isDiv();\n\t}\n\tupdateStyles(styles: BlockStyleObjects) {\n\t\tthis.baseStyles = Object.assign({}, this.baseStyles, styles.baseStyles);\n\t\tthis.mobileStyles = Object.assign({}, this.mobileStyles, styles.mobileStyles);\n\t\tthis.tabletStyles = Object.assign({}, this.tabletStyles, styles.tabletStyles);\n\t}\n\tgetBackgroundColor() {\n\t\treturn this.getStyle(\"backgroundColor\") || \"transparent\";\n\t}\n\tgetPosition() {\n\t\treturn {x : this.getStyle(\"left\"), y : this.getStyle(\"top\")};\n\t}\n\tgetSize() {\n\t\treturn {width : this.getStyle(\"width\"), height : this.getStyle(\"height\")};\n\t}\n\tgetRealSize() {\n\t\t\n\t\tconst element = document.querySelector(`[data-block-id=\"${this.blockId}\"]`);\n\t\tif(!element) return {width : 0, height : 0};\n\t\treturn {width : PixelAfterZoom( element.clientWidth), height : PixelAfterZoom(element.clientHeight)};\n\t}\n\tgetFontFamily() {\n\t\tconst editor = this.getEditor();\n\t\tif (this.isText() && editor && editor.isEditable) {\n\t\t\treturn editor.getAttributes(\"textStyle\").fontFamily;\n\t\t}\n\t\treturn this.getStyle(\"fontFamily\");\n\t}\n\tsetFontFamily(fontFamily: string) {\n\t\tconst editor = this.getEditor();\n\t\tif (this.isText() && editor && editor.isEditable) {\n\t\t\teditor.chain().focus().setFontFamily(fontFamily).run();\n\t\t} else {\n\t\t\tthis.setStyle(\"fontFamily\", fontFamily);\n\t\t}\n\t}\n\tgetTextColor() {\n\t\tconst editor = this.getEditor();\n\t\tif (this.isText() && editor && editor.isEditable) {\n\t\t\treturn editor.getAttributes(\"textStyle\").color;\n\t\t} else {\n\t\t\treturn this.getStyle(\"color\");\n\t\t}\n\t}\n\tgetEditor(): null | Editor {\n\t\treturn null;\n\t}\n\tsetTextColor(color: string) {\n\t\tconst editor = this.getEditor();\n\t\tif (this.isText() && editor && editor.isEditable) {\n\t\t\teditor.chain().focus().setColor(color).run();\n\t\t} else {\n\t\t\tthis.setStyle(\"color\", color);\n\t\t}\n\t}\n\tisHTML() {\n\t\treturn this.originalElement === \"__raw_html__\";\n\t}\n\tmakeBlockEditable() {\n\t\tconst store = useStore();\n\t\tthis.selectBlock();\n\t\tstore.builderState.editableBlock = this;\n\t\tnextTick(() => {\n\t\t\tthis.getEditor()?.commands.focus(\"all\");\n\t\t});\n\t}\n\tisExtendedFromComponent() {\n\t\treturn Boolean(this.extendedFromComponent) || Boolean(this.isChildOfComponent);\n\t}\n\tconvertToRepeater() {\n\t\tthis.setBaseStyle(\"display\", \"flex\");\n\t\tthis.setBaseStyle(\"flexDirection\", \"column\");\n\t\tthis.setBaseStyle(\"alignItems\", \"flex-start\");\n\t\tthis.setBaseStyle(\"justifyContent\", \"flex-start\");\n\t\tthis.setBaseStyle(\"flexWrap\", \"wrap\");\n\t\tthis.setBaseStyle(\"width\", \"fit-content\");\n\t\tthis.setBaseStyle(\"height\", \"fit-content\");\n\t\tthis.setBaseStyle(\"gap\", \"20px\");\n\t\tthis.isRepeaterBlock = true;\n\t}\n\tmoveChild(child: Block, index: number) {\n\t\tconst childIndex = this.children.findIndex((block) => block.blockId === child.blockId);\n\t\tif (childIndex > -1) {\n\t\t\tthis.children.splice(childIndex, 1);\n\t\t\tthis.children.splice(index, 0, child);\n\t\t}\n\t}\n\tisRepeater() {\n\t\treturn this.isRepeaterBlock;\n\t}\n\tgetDataKey(key: keyof BlockDataKey): string {\n\t\tlet dataKey = (this.dataKey && this.dataKey[key]) || \"\";\n\t\tif (!dataKey && this.isExtendedFromComponent()) {\n\t\t\tdataKey = this.getComponent()?.getDataKey(key);\n\t\t}\n\t\treturn dataKey;\n\t}\n\tsetDataKey(key: keyof BlockDataKey, value: string) {\n\t\tif (!this.dataKey) {\n\t\t\tthis.dataKey = {\n\t\t\t\tkey: \"\",\n\t\t\t\ttype: this.isImage() || this.isLink() ? \"attribute\" : \"key\",\n\t\t\t\tproperty: this.isLink() ? \"href\" : this.isImage() ? \"src\" : \"innerHTML\",\n\t\t\t};\n\t\t}\n\t\tthis.dataKey[key] = value;\n\t}\n\tgetInnerHTML(): string {\n\t\tlet innerHTML = this.innerHTML || \"\";\n\t\tif (!innerHTML && this.isExtendedFromComponent()) {\n\t\t\tinnerHTML = this.getComponent().getInnerHTML();\n\t\t}\n\t\treturn innerHTML;\n\t}\n\tsetInnerHTML(innerHTML: string) {\n\t\tthis.innerHTML = innerHTML;\n\t}\n\tgetGradient() {\n\t\treturn this.gradient;\n\t}\n\tsetGradient(gradient: string | undefined) {\n\t\tthis.gradient = gradient;\n\t}\n\ttoggleVisibility() {\n\t\tif (this.getStyle(\"display\") === \"none\") {\n\t\t\tthis.setStyle(\"display\", \"block\");\n\t\t} else {\n\t\t\tthis.setStyle(\"display\", \"none\");\n\t\t}\n\t}\n\tisVisible() {\n\t\treturn this.getStyle(\"display\") !== \"none\";\n\t}\n\textendFromComponent(componentName: string) {\n\t\tthis.extendedFromComponent = componentName;\n\t\tthis.resetChanges();\n\t}\n\tisChildOfComponentBlock() {\n\t\treturn Boolean(this.isChildOfComponent);\n\t}\n\tresetChanges() {\n\t\t// resetBlock(this, this.extendedFromComponent);\n\t\tconst component = this.getComponent();\n\t\tresetBlock(this, this.extendedFromComponent, component.children);\n\t}\n\tconvertToLink() {\n\t\tthis.element = \"a\";\n\t\tthis.attributes.href = \"#\";\n\t}\n\tgetElement() {\n\t\tif (this.isExtendedFromComponent()) {\n\t\t\treturn this.getComponent()?.element || \"div\";\n\t\t}\n\t\treturn this.element;\n\t}\n\tgetUsedComponentNames() {\n\t\tconst store = useStore();\n\t\tconst componentNames = [] as string[];\n\t\tif (this.extendedFromComponent) {\n\t\t\tcomponentNames.push(this.extendedFromComponent);\n\t\t}\n\t\tif (this.isChildOfComponent) {\n\t\t\tcomponentNames.push(this.isChildOfComponent);\n\t\t}\n\t\tthis.children.forEach((child) => {\n\t\t\tcomponentNames.push(...child.getUsedComponentNames());\n\t\t});\n\n\t\tcomponentNames.forEach((name) => {\n\t\t\tcomponentNames.push(...store.getComponentBlock(name).getUsedComponentNames());\n\t\t});\n\n\t\treturn new Set(componentNames);\n\t}\n\tisFlex() {\n\t\treturn this.getStyle(\"display\") === \"flex\";\n\t}\n\tisRow() {\n\t\treturn this.isFlex() && this.getStyle(\"flexDirection\") === \"row\";\n\t}\n\tisColumn() {\n\t\treturn this.isFlex() && this.getStyle(\"flexDirection\") === \"column\";\n\t}\n\tduplicateBlock() {\n\t\tconst store = useStore();\n\t\tstore.history.pause();\n\t\tconst blockCopy = store.getBlockCopy(this);\n\t\tconst parentBlock = this.getParentBlock();\n\n\t\tif (blockCopy.getStyle(\"position\") === \"absolute\") {\n\t\t\t// shift the block a bit\n\t\t\tconst left = getNumberFromPx(blockCopy.getStyle(\"left\"));\n\t\t\tconst top = getNumberFromPx(blockCopy.getStyle(\"top\"));\n\t\t\tblockCopy.setStyle(\"left\", `${left + 20}px`);\n\t\t\tblockCopy.setStyle(\"top\", `${top + 20}px`);\n\t\t}\n\n\t\tlet child = null as Block | null;\n\t\tif (parentBlock) {\n\t\t\tchild = parentBlock.addChildAfter(blockCopy, this);\n\t\t} else {\n\t\t\tchild = store.builderState.blocks[0]?.addChild(blockCopy);\n\t\t}\n\t\tnextTick(() => {\n\t\t\tif (child) {\n\t\t\t\tchild.selectBlock();\n\t\t\t}\n\t\t\tstore.history.resume();\n\t\t\tstore.history.commit();\n\t\t});\n\t}\n\tgetPadding() {\n\t\tconst padding = this.getStyle(\"padding\") || \"0px\";\n\n\t\tconst paddingTop = this.getStyle(\"paddingTop\");\n\t\tconst paddingBottom = this.getStyle(\"paddingBottom\");\n\t\tconst paddingLeft = this.getStyle(\"paddingLeft\");\n\t\tconst paddingRight = this.getStyle(\"paddingRight\");\n\n\t\tif (!paddingTop && !paddingBottom && !paddingLeft && !paddingRight) {\n\t\t\treturn padding;\n\t\t}\n\n\t\tif (\n\t\t\tpaddingTop &&\n\t\t\tpaddingBottom &&\n\t\t\tpaddingTop === paddingBottom &&\n\t\t\tpaddingTop === paddingRight &&\n\t\t\tpaddingTop === paddingLeft\n\t\t) {\n\t\t\treturn paddingTop;\n\t\t}\n\n\t\tif (paddingTop && paddingLeft && paddingTop === paddingBottom && paddingLeft === paddingRight) {\n\t\t\treturn `${paddingTop} ${paddingLeft}`;\n\t\t} else {\n\t\t\treturn `${paddingTop || padding} ${paddingRight || padding} ${paddingBottom || padding} ${\n\t\t\t\tpaddingLeft || padding\n\t\t\t}`;\n\t\t}\n\t}\n\tsetPadding(padding: string) {\n\t\t// reset padding\n\t\tthis.removeStyle(\"padding\");\n\t\tthis.removeStyle(\"paddingTop\");\n\t\tthis.removeStyle(\"paddingBottom\");\n\t\tthis.removeStyle(\"paddingLeft\");\n\t\tthis.removeStyle(\"paddingRight\");\n\n\t\tif (!padding) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst paddingArray = padding.split(\" \");\n\n\t\tif (paddingArray.length === 1) {\n\t\t\tthis.setStyle(\"padding\", paddingArray[0]);\n\t\t} else if (paddingArray.length === 2) {\n\t\t\tthis.setStyle(\"paddingTop\", paddingArray[0]);\n\t\t\tthis.setStyle(\"paddingBottom\", paddingArray[0]);\n\t\t\tthis.setStyle(\"paddingLeft\", paddingArray[1]);\n\t\t\tthis.setStyle(\"paddingRight\", paddingArray[1]);\n\t\t} else if (paddingArray.length === 3) {\n\t\t\tthis.setStyle(\"paddingTop\", paddingArray[0]);\n\t\t\tthis.setStyle(\"paddingLeft\", paddingArray[1]);\n\t\t\tthis.setStyle(\"paddingRight\", paddingArray[1]);\n\t\t\tthis.setStyle(\"paddingBottom\", paddingArray[2]);\n\t\t} else if (paddingArray.length === 4) {\n\t\t\tthis.setStyle(\"paddingTop\", paddingArray[0]);\n\t\t\tthis.setStyle(\"paddingRight\", paddingArray[1]);\n\t\t\tthis.setStyle(\"paddingBottom\", paddingArray[2]);\n\t\t\tthis.setStyle(\"paddingLeft\", paddingArray[3]);\n\t\t}\n\t}\n\tsetMargin(margin: string) {\n\t\t// reset margin\n\t\tthis.removeStyle(\"margin\");\n\t\tthis.removeStyle(\"marginTop\");\n\t\tthis.removeStyle(\"marginBottom\");\n\t\tthis.removeStyle(\"marginLeft\");\n\t\tthis.removeStyle(\"marginRight\");\n\n\t\tif (!margin) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst marginArray = margin.split(\" \");\n\n\t\tif (marginArray.length === 1) {\n\t\t\tthis.setStyle(\"margin\", marginArray[0]);\n\t\t} else if (marginArray.length === 2) {\n\t\t\tthis.setStyle(\"marginTop\", marginArray[0]);\n\t\t\tthis.setStyle(\"marginBottom\", marginArray[0]);\n\t\t\tthis.setStyle(\"marginLeft\", marginArray[1]);\n\t\t\tthis.setStyle(\"marginRight\", marginArray[1]);\n\t\t} else if (marginArray.length === 3) {\n\t\t\tthis.setStyle(\"marginTop\", marginArray[0]);\n\t\t\tthis.setStyle(\"marginLeft\", marginArray[1]);\n\t\t\tthis.setStyle(\"marginRight\", marginArray[1]);\n\t\t\tthis.setStyle(\"marginBottom\", marginArray[2]);\n\t\t} else if (marginArray.length === 4) {\n\t\t\tthis.setStyle(\"marginTop\", marginArray[0]);\n\t\t\tthis.setStyle(\"marginRight\", marginArray[1]);\n\t\t\tthis.setStyle(\"marginBottom\", marginArray[2]);\n\t\t\tthis.setStyle(\"marginLeft\", marginArray[3]);\n\t\t}\n\t}\n\tgetMargin() {\n\t\tconst margin = this.getStyle(\"margin\") || \"0px\";\n\n\t\tconst marginTop = this.getStyle(\"marginTop\");\n\t\tconst marginBottom = this.getStyle(\"marginBottom\");\n\t\tconst marginLeft = this.getStyle(\"marginLeft\");\n\t\tconst marginRight = this.getStyle(\"marginRight\");\n\n\t\tif (!marginTop && !marginBottom && !marginLeft && !marginRight) {\n\t\t\treturn margin;\n\t\t}\n\n\t\tif (\n\t\t\tmarginTop &&\n\t\t\tmarginBottom &&\n\t\t\tmarginTop === marginBottom &&\n\t\t\tmarginTop === marginRight &&\n\t\t\tmarginTop === marginLeft\n\t\t) {\n\t\t\treturn marginTop;\n\t\t}\n\n\t\tif (marginTop && marginLeft && marginTop === marginBottom && marginLeft === marginRight) {\n\t\t\treturn `${marginTop} ${marginLeft}`;\n\t\t} else {\n\t\t\treturn `${marginTop || margin} ${marginRight || margin} ${marginBottom || margin} ${\n\t\t\t\tmarginLeft || margin\n\t\t\t}`;\n\t\t}\n\t}\n}\n\n// class BlockTree {\n// \tblocksMap: Map<string, Block>;\n// \tconstructor() {\n// \t\tthis.blocksMap = new Map();\n// \t}\n\n// \tbuildBlockMap(blocks: Array<Block>) {\n// \t\tfor (const block of blocks) {\n// \t\t\tfor (const child of block.children) {\n// \t\t\t\tthis.blocksMap.set(child.blockId, block);\n// \t\t\t\tthis.buildBlockMap(child.children);\n// \t\t\t}\n// \t\t}\n// \t}\n\n// \tfindParentBlock(blockId: string) {\n// \t\treturn this.blocksMap.get(blockId) || null;\n// \t}\n// }\n\nexport default Block;\n","import { createListResource } from \"frappe-ui\";\n\nimport { BuilderComponent } from \"@/types/Builder/BuilderComponent\";\nimport Block from \"@/utils/block\";\nimport { reactive } from \"vue\";\n\nconst webComponent = createListResource({\n\tmethod: \"GET\",\n\tdoctype: \"Builder Component\",\n\tfields: [\"component_name\", \"block\", \"name\", \"for_web_page\", \"component_id\", \"category\", \"frame\", \"palette\", \"typography\"],\n\torderBy: \"creation\",\n\tcache: \"components\",\n\tstart: 0,\n\tpageLength: 100,\n\tauto: true,\n\ttransform(data: BuilderComponent[]) {\n\t\tdata.forEach((d) => {\n\t\t\tif (!(d.block instanceof Block)) {\n\t\t\t\td.block = reactive(new Block(JSON.parse(d.block)));\n\t\t\t}\n\t\t});\n\t\treturn data;\n\t},\n});\n\nexport default webComponent;\n","import { reactive } from \"vue\";\nimport Block from \"./block\";\n\nfunction getBlockTemplate(\n\ttype: \"html\" | \"text\" | \"image\" | \"container\" | \"body\" | \"fit-container\" | \"fallback-component\" | \"section\"\n): BlockOptions {\n\tswitch (type) {\n\t\tcase \"section\":\n\t\t\t{\n\t\t\t\treturn {\n\t\t\t\t\tname: \"Section\",\n\t\t\t\t\telement: \"section\",\n\t\t\t\t\tattributes: {} as BlockAttributeMap,\n\t\t\t\t\tbaseStyles: {\n\t\t\t\t\t\tposition: \"relative\",\n\t\t\t\t\t\theight: \"100vh\",\n\t\t\t\t\t\twidth: \"100%\",\n\t\t\t\t\t} as BlockStyleMap,\n\t\t\t\t};\n\t\t\t}\n\t\tcase \"html\":\n\t\t\treturn {\n\t\t\t\tname: \"HTML\",\n\t\t\t\telement: \"div\",\n\t\t\t\toriginalElement: \"__raw_html__\",\n\t\t\t\tinnerHTML: `<div style=\"color: #8e8e8e;background: #f4f4f4;display:flex;flex-direction:column;position:absolute;top:auto;left:auto;width: 200px;height: 155px;align-items:center;font-size:18px;justify-content:center\"><p>&lt;paste html&gt;</p></div>`,\n\t\t\t\tbaseStyles: {\n\t\t\t\t\tposition: \"absolute\",\n\t\t\t\t\theight: \"fit-content\",\n\t\t\t\t\twidth: \"fit-content\",\n\t\t\t\t} as BlockStyleMap,\n\t\t\t};\n\t\tcase \"text\":\n\t\t\treturn {\n\t\t\t\tname: \"Text\",\n\t\t\t\telement: \"p\",\n\t\t\t\tinnerHTML: \"Text\",\n\t\t\t\tbaseStyles: {\n\t\t\t\t\tposition: \"absolute\",\n\t\t\t\t\tfontSize: \"30px\",\n\t\t\t\t\twidth: \"fit-content\",\n\t\t\t\t\theight: \"fit-content\",\n\t\t\t\t\tlineHeight: \"1\",\n\t\t\t\t\tminWidth: \"30px\",\n\t\t\t\t} as BlockStyleMap,\n\t\t\t};\n\t\tcase \"image\":\n\t\t\treturn {\n\t\t\t\t\n\t\t\t\tname: \"Image\",\n\t\t\t\telement: \"img\",\n\t\t\t\tbaseStyles: {\n\t\t\t\t\tposition: \"absolute\",\n\t\t\t\t\tobjectFit: \"cover\",\n\t\t\t\t} as BlockStyleMap,\n\t\t\t};\n\t\tcase \"container\":\n\t\t\treturn {\n\t\t\t\t\n\t\t\t\tname: \"Container\",\n\t\t\t\telement: \"div\",\n\t\t\t\tblockName: \"container\",\n\t\t\t\tbaseStyles: {\n\t\t\t\t\tposition: \"absolute\",\n\t\t\t\t} as BlockStyleMap,\n\t\t\t};\n\t\tcase \"body\":\n\t\t\treturn {\n\t\t\t\telement: \"div\",\n\t\t\t\toriginalElement: \"body\",\n\t\t\t\tchildren: [reactive(new Block(getBlockTemplate(\"section\")))],\n\t\t\t\tattributes: {} as BlockAttributeMap,\n\t\t\t\tbaseStyles: {\n\t\t\t\t\tdisplay: \"flex\",\n\t\t\t\t\tflexWrap: \"wrap\",\n\t\t\t\t\tflexDirection: \"column\",\n\t\t\t\t} as BlockStyleMap,\n\t\t\t\tblockId: \"root\",\n\t\t\t};\n\n\t\tcase \"fit-container\":\n\t\t\treturn {\n\t\t\t\tname: \"Container\",\n\n\t\t\t\telement: \"div\",\n\t\t\t\tblockName: \"container\",\n\t\t\t\tbaseStyles: {\n\t\t\t\t\tposition: \"absolute\",\n\t\t\t\t\theight: \"fit-content\",\n\t\t\t\t\twidth: \"fit-content\",\n\t\t\t\t} as BlockStyleMap,\n\t\t\t};\n\t\tcase \"fallback-component\":\n\t\t\treturn {\n\t\t\t\tname: \"HTML\",\n\n\t\t\t\telement: \"p\",\n\t\t\t\toriginalElement: \"__raw_html__\",\n\t\t\t\tinnerHTML: `<div style=\"color: red;background: #f4f4f4;display:flex;flex-direction:column;position:absolute;top:auto;left:auto;width: 600px;height: 275px;align-items:center;font-size: 30px;justify-content:center\"><p>Component missing</p></div>`,\n\t\t\t\tbaseStyles: {\n\t\t\t\t\tposition: \"absolute\",\n\t\t\t\t\theight: \"fit-content\",\n\t\t\t\t\twidth: \"fit-content\",\n\t\t\t\t} as BlockStyleMap,\n\t\t\t};\n\t}\n}\n\nexport default getBlockTemplate;\n","/**\n * @license lucide-vue-next v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nvar defaultAttributes = {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  width: 24,\n  height: 24,\n  viewBox: \"0 0 24 24\",\n  fill: \"none\",\n  stroke: \"currentColor\",\n  \"stroke-width\": 2,\n  \"stroke-linecap\": \"round\",\n  \"stroke-linejoin\": \"round\"\n};\n\nexport { defaultAttributes as default };\n//# sourceMappingURL=defaultAttributes.js.map\n","/**\n * @license lucide-vue-next v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport { h } from 'vue';\nimport defaultAttributes from './defaultAttributes.js';\n\nconst toKebabCase = (string) => string.replace(/([a-z0-9])([A-Z])/g, \"$1-$2\").toLowerCase();\nconst createLucideIcon = (iconName, iconNode) => ({ size, strokeWidth = 2, absoluteStrokeWidth, color, class: classes, ...props }, { attrs, slots }) => {\n  return h(\n    \"svg\",\n    {\n      ...defaultAttributes,\n      width: size || defaultAttributes.width,\n      height: size || defaultAttributes.height,\n      stroke: color || defaultAttributes.stroke,\n      \"stroke-width\": absoluteStrokeWidth ? Number(strokeWidth) * 24 / Number(size) : strokeWidth,\n      ...attrs,\n      class: [\"lucide\", `lucide-${toKebabCase(iconName)}`],\n      ...props\n    },\n    [\n      ...iconNode.map((child) => h(...child)),\n      ...slots.default ? [slots.default()] : []\n    ]\n  );\n};\n\nexport { createLucideIcon as default, toKebabCase };\n//# sourceMappingURL=createLucideIcon.js.map\n","/**\n * @license lucide-vue-next v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst HelpCircle = createLucideIcon(\"HelpCircleIcon\", [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }],\n  [\"path\", { d: \"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3\", key: \"1u773s\" }],\n  [\"path\", { d: \"M12 17h.01\", key: \"p32p05\" }]\n]);\n\nexport { HelpCircle as default };\n//# sourceMappingURL=help-circle.js.map\n","/**\n * @license lucide-vue-next v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Layers = createLucideIcon(\"LayersIcon\", [\n  [\n    \"path\",\n    {\n      d: \"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z\",\n      key: \"8b97xw\"\n    }\n  ],\n  [\"path\", { d: \"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65\", key: \"dd6zsq\" }],\n  [\"path\", { d: \"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65\", key: \"ep9fru\" }]\n]);\n\nexport { Layers as default };\n//# sourceMappingURL=layers.js.map\n","/**\n * @license lucide-vue-next v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst LayoutPanelLeft = createLucideIcon(\"LayoutPanelLeftIcon\", [\n  [\"rect\", { width: \"7\", height: \"18\", x: \"3\", y: \"3\", rx: \"1\", key: \"2obqm\" }],\n  [\"rect\", { width: \"7\", height: \"7\", x: \"14\", y: \"3\", rx: \"1\", key: \"6d4xhi\" }],\n  [\"rect\", { width: \"7\", height: \"7\", x: \"14\", y: \"14\", rx: \"1\", key: \"nxv5o0\" }]\n]);\n\nexport { LayoutPanelLeft as default };\n//# sourceMappingURL=layout-panel-left.js.map\n","/**\n * @license lucide-vue-next v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Shapes = createLucideIcon(\"ShapesIcon\", [\n  [\n    \"path\",\n    {\n      d: \"M8.3 10a.7.7 0 0 1-.626-1.079L11.4 3a.7.7 0 0 1 1.198-.043L16.3 8.9a.7.7 0 0 1-.572 1.1Z\",\n      key: \"1bo67w\"\n    }\n  ],\n  [\"rect\", { x: \"3\", y: \"14\", width: \"7\", height: \"7\", rx: \"1\", key: \"1bkyp8\" }],\n  [\"circle\", { cx: \"17.5\", cy: \"17.5\", r: \"3.5\", key: \"w3z12y\" }]\n]);\n\nexport { Shapes as default };\n//# sourceMappingURL=shapes.js.map\n","/**\n * @license lucide-vue-next v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Sparkles = createLucideIcon(\"SparklesIcon\", [\n  [\n    \"path\",\n    {\n      d: \"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z\",\n      key: \"17u4zn\"\n    }\n  ],\n  [\"path\", { d: \"M5 3v4\", key: \"bklmnn\" }],\n  [\"path\", { d: \"M19 17v4\", key: \"iiml17\" }],\n  [\"path\", { d: \"M3 5h4\", key: \"nem4j1\" }],\n  [\"path\", { d: \"M17 19h4\", key: \"lbex7p\" }]\n]);\n\nexport { Sparkles as default };\n//# sourceMappingURL=sparkles.js.map\n","import { UseRefHistoryReturn, useDebouncedRefHistory } from \"@vueuse/core\";\nimport { FileUploadHandler, toast } from \"frappe-ui\";\nimport { defineStore, storeToRefs } from \"pinia\";\nimport { reactive } from \"vue\";\nimport webComponent from \"./data/webComponent\";\nimport { webPages } from \"./data/webPage\";\nimport { BuilderComponent } from \"./types/Builder/BuilderComponent\";\nimport { BuilderPage } from \"./types/Builder/BuilderPage\";\nimport Block from \"./utils/block\";\nimport getBlockTemplate from \"./utils/blockTemplate\";\nimport { stripExtension } from \"./utils/helpers\";\nimport  {HelpCircle, Layers, LayoutPanelLeft, Shapes, Sparkles}  from \"lucide-vue-next\";\n\nconst useStore = defineStore(\"store\", {\n\tstate: () => ({\n\t\tbuilderState: {\n\t\t\teditableBlock: <Block | null>null,\n\t\t\tblocks: <Block[]>[reactive(new Block(getBlockTemplate(\"body\")))],\n\t\t},\n\t\tsettingPage: false,\n\t\tdefaultKeys: <string[]>[ 'Backspace' , 'Delete' , 'Enter' , 'Meta' , 'Shift' ,'Control' , 'Alt' , 'CapsLock' , 'Tab' , 'Escape' , 'ArrowLeft' , 'ArrowRight' , 'ArrowUp' , 'ArrowDown' , 'Home' , 'End' , 'PageUp' , 'PageDown' , 'Insert' , 'NumLock' , 'ScrollLock' , 'Pause' , 'ContextMenu' , 'PrintScreen' , 'Help' , 'Clear' , 'F1' , 'F2' , 'F3' , 'F4' , 'F5' , 'F6' , 'F7' , 'F8' , 'F9' , 'F10' , 'F11' , 'F12' , 'F13' , 'F14' , 'F15' , 'F16' , 'F17' , 'F18' , 'F19' , 'F20' , 'F21' , 'F22' , 'F23' , 'F24' , 'F25' , 'F26' , 'F27' , 'F28' , 'F29' , 'F30' , 'F31' , 'F32' , 'F33' , 'F34' , 'F35' , 'F36' , 'F37' , 'F38' , 'F39' , 'F40' , 'F41' , 'F42' , 'F43' , 'F44' ],\n\t\teditingComponent: <string | null>null,\n\t\teditingMode: <EditingMode>\"page\",\n\t\tactiveBreakpoint: \"desktop\",\n\t\tselectedPage: <string | null>null,\n\t\tpageData: <{ [key: string]: [] }>{},\n\t\tmode: <BuilderMode>\"select\",\n\t\tselectedBlocks: <Block[]>[],\n\t\thistory: {\n\t\t\tpause: () => {},\n\t\t\tresume: () => {},\n\t\t} as UseRefHistoryReturn<{}, {}>,\n\t\tusedComponents: {},\n\t\ttemplatesinUse: <any[] | null>null,\n\t\thoveredBlock: <string | null>null,\n\t\thoveredBreakpoint: <string | null>null,\n\t\trouteVariables: <{ [key: string]: string }>{},\n\t\tautoSave: true,\n\t\tcategories: <Category[]>[{\n\t\t\tname: \"templates\",\n\t\t\tIcon: LayoutPanelLeft,\n\t\t\tfocus : \"#FF4488\"\n\t\t},{\n\t\t\tname: \"components\",\n\t\t\tIcon: Shapes,\n\t\t\tfocus : '#F82'\n\t\t},{\n\t\t\tname: \"layers\",\n\t\t\tIcon: Layers,\n\t\t\tfocus : '#FB0'\n\t\t},{\n\t\t\tname: \"ia\",\n\t\t\tIcon: Sparkles,\n\t\t\tfocus : '#4DD'\n\t\t},{\n\t\t\tname: \"question\",\n\t\t\tIcon: HelpCircle,\n\t\t\tfocus : \"#38AAFF\"\n\n\t\t}],\n\t\tbuilderLayout: {\n\t\t\trightPanelWidth: 267,\n\t\t\tleftPanelWidth: 364,\n\t\t\tscriptEditorHeight: 400,\n\t\t},\n\t\tflow: [\n\t\t\t{\n\t\t\t\tname: \"Row\",\n\t\t\t\tstyleKey: \"flexDirection\",\n\t\t\t\tstyleValue: \"row\",\n\t\t\t\ticon: \"columns\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"Column\",\n\t\t\t\tstyleKey: \"flexDirection\",\n\t\t\t\tstyleValue: \"column\",\n\t\t\t\ticon: \"credit-card\",\n\t\t\t},\n\t\t],\n\t\talignments: [\n\t\t\t{\n\t\t\t\tname: \"Left\",\n\t\t\t\tstyleKey: \"justifyContent\",\n\t\t\t\tstyleValue: \"flex-start\",\n\t\t\t\ticon: \"align-left\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"Center\",\n\t\t\t\tstyleKey: \"justifyContent\",\n\t\t\t\tstyleValue: \"center\",\n\t\t\t\ticon: \"align-center\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"Right\",\n\t\t\t\tstyleKey: \"justifyContent\",\n\t\t\t\tstyleValue: \"flex-end\",\n\t\t\t\ticon: \"align-right\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"Justify\",\n\t\t\t\tstyleKey: \"justifyContent\",\n\t\t\t\tstyleValue: \"space-between\",\n\t\t\t\ticon: \"align-justify\",\n\t\t\t},\n\t\t],\n\t\tverticalAlignments: [\n\t\t\t{\n\t\t\t\tname: \"Top\",\n\t\t\t\tstyleKey: \"alignItems\",\n\t\t\t\tstyleValue: \"flex-start\",\n\t\t\t\ticon: \"arrow-up\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"Middle\",\n\t\t\t\tstyleKey: \"alignItems\",\n\t\t\t\tstyleValue: \"center\",\n\t\t\t\ticon: \"minus\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"Bottom\",\n\t\t\t\tstyleKey: \"alignItems\",\n\t\t\t\tstyleValue: \"flex-end\",\n\t\t\t\ticon: \"arrow-down\",\n\t\t\t},\n\t\t],\n\t\tpageName: \"Home\",\n\t\troute: \"/\",\n\t\tpaletteColors: <string[]| null> null,\n\t\tpastelCssColors: [\n\t\t\t\"#FFFFFF\",\n\t\t\t\"#F5FFFA\",\n\t\t\t\"#F8F8FF\",\n\t\t\t\"#F0F8FF\",\n\t\t\t\"#F5F5DC\",\n\t\t\t\"#FFE4C4\",\n\t\t\t\"#FFEBCD\",\n\t\t\t\"#FFDEAD\",\n\t\t\t\"#FFC1C1\",\n\t\t\t\"#FFB6C1\",\n\t\t\t\"#FFA07A\",\n\t\t\t\"#FF8C00\",\n\t\t\t\"#FF7F50\",\n\t\t\t\"#FF69B4\",\n\t\t\t\"#FF6347\",\n\t\t\t\"#FDB813\",\n\t\t\t\"#FDAB9F\",\n\t\t\t\"#FDA50F\",\n\t\t\t\"#F49AC2\",\n\t\t\t\"#FFB347\",\n\t\t\t\"#FFD700\",\n\t\t\t\"#ADFF2F\",\n\t\t\t\"#87CEFA\",\n\t\t\t\"#00BFFF\",\n\t\t\t\"#ADD8E6\",\n\t\t\t\"#B0E0E6\",\n\t\t\t\"#5F9EA0\",\n\t\t\t\"#FDD5B1\",\n\t\t\t\"#FCCDE3\",\n\t\t\t\"#FCC2D9\",\n\t\t\t\"#FCB4D5\",\n\t\t\t\"#FBB5A3\",\n\t\t\t\"#FBB917\",\n\t\t\t\"#FBB972\",\n\t\t\t\"#FBB9AC\",\n\t\t\t\"#FBCEB1\",\n\t\t\t\"linear-gradient(120deg, #f093fb 0%, #f5576c 100%)\",\n\t\t\t\"linear-gradient(to top, #a18cd1 0%, #fbc2eb 100%)\",\n\t\t\t\"linear-gradient(to top, #a8edea 0%, #fed6e3 100%)\",\n\t\t\t\"linear-gradient(to top, #96fbc4 0%, #f9f586 100%)\",\n\t\t\t\"linear-gradient(to top, #9795f0 0%, #fbc8d4 100%)\",\n\t\t\t\"linear-gradient(-60deg, #16a085 0%, #f4d03f 100%)\",\n\t\t\t\"linear-gradient( 135deg, #81FFEF 10%, #F067B4 100%)\",\n\t\t\t\"black\",\n\t\t\t\"transparent\",\n\t\t],\n\t\tguides: {\n\t\t\tshowX: false,\n\t\t\tshowY: false,\n\t\t\tx: 0,\n\t\t\ty: 0,\n\t\t},\n\t\ttextColors: [\n\t\t\t\"#000000\",\n\t\t\t\"#424242\",\n\t\t\t\"#636363\",\n\t\t\t\"#808080\",\n\t\t\t\"#9C9C94\",\n\t\t\t\"#C0C0C0\",\n\t\t\t\"#CEC6CE\",\n\t\t\t\"#EFEFEF\",\n\t\t\t\"#F7F7F7\",\n\t\t\t\"#FFFFFF\",\n\t\t],\n\t\tdeviceBreakpoints: [\n\t\t\t{\n\t\t\t\ticon: \"monitor\",\n\t\t\t\tdevice: \"desktop\",\n\t\t\t\tdisplayName: \"Desktop\",\n\t\t\t\twidth: 1400,\n\t\t\t\tvisible: true,\n\t\t\t},\n\t\t\t{\n\t\t\t\ticon: \"tablet\",\n\t\t\t\tdevice: \"tablet\",\n\t\t\t\tdisplayName: \"Tablet\",\n\t\t\t\twidth: 800,\n\t\t\t\tvisible: false,\n\t\t\t},\n\t\t\t{\n\t\t\t\ticon: \"smartphone\",\n\t\t\t\tdevice: \"mobile\",\n\t\t\t\tdisplayName: \"Mobile\",\n\t\t\t\twidth: 420,\n\t\t\t\tvisible: false,\n\t\t\t},\n\t\t],\n\t\tleftPanelActiveTab: <LeftSidebarTabOption>\"templates\",\n\t\trightPanelActiveTab: <RightSidebarTabOption>\"Properties\",\n\t\trightPanelSimpleActiveTab : <RightSidebarSimpleTabOption>\"Edit\",\n\t\tshowRightPanel: <boolean>true,\n\t\tshowAvanced:<boolean>false,\n\t\tshowLeftPanel: <boolean>true,\n\t\tblockEditorCanvas: {\n\t\t\tscale: 0.5,\n\t\t\ttranslateX: 0,\n\t\t\ttranslateY: 0,\n\t\t\tstartX: 0,\n\t\t\tstartY: 0,\n\t\t\tbackground: \"\",\n\t\t\tscaling: false,\n\t\t\tpanning: false,\n\t\t\tsettingCanvas: true,\n\t\t\toverlayElement: <HTMLElement | null>null,\n\t\t},\n\t\tcomponentEditorCanvas: {\n\t\t\tscale: 0.5,\n\t\t\ttranslateX: 0,\n\t\t\ttranslateY: 0,\n\t\t\tstartX: 0,\n\t\t\tstartY: 0,\n\t\t\tbackground: \"\",\n\t\t\tscaling: false,\n\t\t\tpanning: false,\n\t\t\tsettingCanvas: false,\n\t\t\toverlayElement: <HTMLElement | null>null,\n\t\t},\n\t\tcopiedStyle: <StyleCopy | null>null,\n\t\tcomponents: <BlockComponent[]>[],\n\t}),\n\tactions: {\n\t\tclearBlocks() {\n\t\t\tthis.builderState.blocks = [];\n\t\t\tthis.builderState.blocks.push(this.getRootBlock());\n\t\t},\n\t\tpushBlocks(blocks: BlockOptions[]) {\n\t\t\tlet parent = this.builderState.blocks[0];\n\t\t\tif (this.editingComponent) {\n\t\t\t\tparent = this.getComponentBlock(this.editingComponent);\n\t\t\t}\n\t\t\tlet firstBlock = this.getBlockInstance(blocks[0]);\n\t\t\tif (firstBlock.isRoot() ,!this.editingComponent) {\n\t\t\t\tthis.builderState.blocks = [firstBlock];\n\t\t\t} else {\n\t\t\t\tfor (let block of blocks) {\n\t\t\t\t\tparent.children.push(this.getBlockInstance(block));\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tnewBlockSection(block ? : Block) {\n\t\t\tconst newblock = this.getBlockInstance(getBlockTemplate(\"section\"));\n\t\t\tif(block)\n\t\t\t{\n\t\t\t\tconst currentIndex = this.builderState.blocks[0].children.indexOf(block);\n\t\t\t\tthis.builderState.blocks[0].children.splice(currentIndex + 1, 0, newblock);\n\t\t\t}else{\n\t\t\t\tthis.builderState.blocks[0].children.push(newblock);\n\t\t\t}\n\n\t\t},\n\t\tgetFirstBlock() {\n\t\t\treturn this.editingComponent\n\t\t\t\t? this.getComponentBlock(this.editingComponent)\n\t\t\t\t: this.builderState.blocks[0];\n\t\t},\n\t\tgetBlockCopy(block: BlockOptions | Block, retainId = false): Block {\n\t\t\tlet b = JSON.parse(JSON.stringify(block));\n\t\t\tif (!retainId) {\n\t\t\t\tconst deleteBlockId = (block: BlockOptions) => {\n\t\t\t\t\tdelete block.blockId;\n\t\t\t\t\tfor (let child of block.children || []) {\n\t\t\t\t\t\tdeleteBlockId(child);\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\tdeleteBlockId(b);\n\t\t\t}\n\t\t\treturn this.getBlockInstance(b);\n\t\t},\n\t\tdeleteSection(block: Block) {\n\t\t\tconst parent = this.findBlock('root');\n\t\t\tconst index = parent!.children.indexOf(block);\n\t\t\tparent!.children.splice(index, 1);\n\t\t},\n\t\tmoveSectionUp(block: Block) {\n\t\t\tconst parent = this.findBlock('root');\n\t\t\tconst index = parent!.children.indexOf(block);\n\t\t\tif (index > 0) {\n\t\t\t\tparent!.children.splice(index - 1, 0, parent!.children.splice(index, 1)[0]);\n\t\t\t}\n\t\t},\n\t\tmoveBlockDown(){\n\t\t\tthis.selectedBlocks.forEach((block) => {\n\t\t\t\tconst parent = this.findParentBlock(block.blockId);\n\t\t\t\tconst index = parent!.children.indexOf(block);\n\t\t\t\tif (index > 0) {\n\t\t\t\t\tparent!.children.splice(index - 1, 0, parent!.children.splice(index, 1)[0]);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tmoveBlockUp(){\n\t\t\tthis.selectedBlocks.forEach((block) => {\n\t\t\t\tconst parent = this.findParentBlock(block.blockId);\n\t\t\t\tconst index = parent!.children.indexOf(block);\n\t\t\t\tif (index < parent!.children.length - 1) {\n\t\t\t\t\tparent!.children.splice(index + 1, 0, parent!.children.splice(index, 1)[0]);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tmoveSectionDown(block: Block) {\n\t\t\tconst parent = this.findBlock('root');\n\t\t\tconst index = parent!.children.indexOf(block);\n\t\t\tif (index < parent!.children.length - 1) {\n\t\t\t\tparent!.children.splice(index + 1, 0, parent!.children.splice(index, 1)[0]);\n\t\t\t}\n\t\t},\n\t\tgetRootBlock() {\n\t\t\treturn this.getBlockInstance(getBlockTemplate(\"body\"));\n\t\t},\n\t\tgetPageData() {\n\t\t\treturn this.builderState.blocks;\n\t\t},\n\t\tasync setPage(page: BuilderPage) {\n\t\t\tthis.settingPage = true;\n\t\t\tif (!page) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst blocks = JSON.parse(page.draft_blocks || page.blocks || \"[]\");\n\t\t\t// clear blocks\n\t\t\tthis.editPage();\n\t\t\tthis.clearBlocks();\n\t\t\tthis.pushBlocks(blocks);\n\t\t\tthis.pageName = page.page_name as string;\n\t\t\tthis.route = page.route || \"/\" + this.pageName.toLowerCase().replace(/ /g, \"-\");\n\t\t\tthis.selectedPage = page.name;\n\t\t\tconst variables = localStorage.getItem(`${page.name}:routeVariables`) || \"{}\";\n\t\t\tthis.routeVariables = JSON.parse(variables);\n\t\t\tthis.setPageData();\n\t\t\tthis.setupHistory();\n\t\t\tsetTimeout(() => (this.settingPage = false));\n\t\t},\n\t\tgetImageBlock(imageSrc: string, imageAlt: string = \"\") {\n\t\t\timageAlt = stripExtension(imageAlt);\n\t\t\tconst imageBlock = getBlockTemplate(\"image\");\n\t\t\tif (!imageBlock.attributes) {\n\t\t\t\timageBlock.attributes = {};\n\t\t\t}\n\t\t\timageBlock.attributes.src = imageSrc;\n\t\t\tif (imageAlt) {\n\t\t\t\timageBlock.attributes.alt = imageAlt;\n\t\t\t}\n\n\t\t\treturn imageBlock;\n\t\t},\n\t\tfindBlock(blockId: string, blocks?: Array<Block>): Block | null {\n\t\t\tif (!blocks) {\n\t\t\t\tblocks = this.builderState.blocks;\n\t\t\t}\n\t\t\tfor (const block of blocks) {\n\t\t\t\tif (block.blockId === blockId) {\n\t\t\t\t\treturn block;\n\t\t\t\t}\n\t\t\t\tif (block.children) {\n\t\t\t\t\tconst found = this.findBlock(blockId, block.children);\n\t\t\t\t\tif (found) {\n\t\t\t\t\t\treturn found;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn null;\n\t\t},\n\t\tfindParentBlock(blockId: string, blocks?: Array<Block>): Block | null {\n\t\t\tif (!blocks) {\n\t\t\t\tblocks = [this.getFirstBlock()];\n\t\t\t}\n\t\t\tfor (const block of blocks) {\n\t\t\t\tif (block.children) {\n\t\t\t\t\tfor (const child of block.children) {\n\t\t\t\t\t\tif (child.blockId === blockId) {\n\t\t\t\t\t\t\treturn block;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tconst found = this.findParentBlock(blockId, block.children);\n\t\t\t\t\tif (found) {\n\t\t\t\t\t\treturn found;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn null;\n\t\t},\n\t\tselectBlock(block: Block, e: MouseEvent | null, scrollIntoView = true) {\n\t\t\tif (this.settingPage) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (e ,e.shiftKey) {\n\t\t\t\tblock.toggleSelectBlock();\n\t\t\t} else {\n\t\t\t\tblock.selectBlock();\n\t\t\t}\n\t\t\tif (scrollIntoView) {\n\t\t\t\t// TODO: move to layers?\n\t\t\t\tdocument\n\t\t\t\t\t.querySelector(`[data-block-layer-id=\"${block.blockId}\"]`)\n\t\t\t\t\t?.scrollIntoView({ behavior: \"instant\", block: \"center\" });\n\t\t\t}\n\t\t\tthis.builderState.editableBlock = null;\n\t\t},\n\t\tgetBlockInstance(options: BlockOptions) {\n\t\t\treturn reactive(new Block(options));\n\t\t},\n\t\teditComponent(block: Block) {\n\t\t\tif (block.isExtendedFromComponent()) {\n\t\t\t\tthis.editingComponent = block?.extendedFromComponent as string;\n\t\t\t}\n\t\t\tthis.clearSelection();\n\t\t\tthis.editingMode = \"component\";\n\t\t},\n\t\tisComponentUsed(componentName: string) {\n\t\t\t// TODO: Refactor or reduce complexity\n\t\t\tconst checkComponent = (block: Block) => {\n\t\t\t\tif (block.extendedFromComponent === componentName) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\tif (block.children) {\n\t\t\t\t\tfor (const child of block.children) {\n\t\t\t\t\t\tif (checkComponent(child)) {\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t};\n\t\t\tfor (const block of this.builderState.blocks) {\n\t\t\t\tif (checkComponent(block)) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false;\n\t\t},\n\t\teditPage(saveComponent = false) {\n\t\t\tthis.clearSelection();\n\t\t\tthis.editingMode = \"page\";\n\t\t\tthis.builderState.editableBlock = null;\n\n\t\t\tif (this.editingComponent) {\n\t\t\t\tif (saveComponent) {\n\t\t\t\t\twebComponent.setValue\n\t\t\t\t\t\t.submit({\n\t\t\t\t\t\t\tname: this.editingComponent,\n\t\t\t\t\t\t\tblock: this.getComponentBlock(this.editingComponent),\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t\ttoast({\n\t\t\t\t\t\t\t\ttext: \"Component saved!\",\n\t\t\t\t\t\t\t\tposition: \"bottom-center\",\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\t// webComponent.fet;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.editingComponent = null;\n\t\t},\n\t\tgetComponentBlock(componentName: string) {\n\t\t\treturn (this.getComponent(componentName)?.block as Block) || this.getFallbackBlock();\n\t\t},\n\t\tgetPaletteColors() {\n\t\t\treturn this.getActivePage().color_palette;\n\n\t\t},\n\t\tgetComponent(componentName: string) {\n\t\t\treturn webComponent.getRow(componentName) as BuilderComponent;\n\t\t},\n\t\tcreateComponent(obj: BuilderComponent, updateExisting = false) {\n\t\t\tconst component = this.getComponent(obj.name);\n\t\t\tif (component) {\n\t\t\t\tconst existingComponent = JSON.stringify(component.block);\n\t\t\t\tconst newComponent = JSON.stringify(obj.block);\n\t\t\t\tif (updateExisting ,existingComponent !== newComponent) {\n\t\t\t\t\treturn webComponent.setValue.submit({\n\t\t\t\t\t\tname: obj.name,\n\t\t\t\t\t\tblock: obj.block,\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn webComponent.insert.submit(obj).catch(() => {\n\t\t\t\tconsole.log(`There was an error while creating ${obj.component_name}`);\n\t\t\t});\n\t\t},\n\t\tupdateColors(){\n\t\t\tconst page = this.getActivePage();\n\t\t\tpage.color_palette = JSON.stringify(this.paletteColors);\n\t\t\twebPages.setValue.submit({\n\t\t\t\tname: page.name,\n\t\t\t\tcolor_palette: page.color_palette\n\t\t\t});\n\t\t},\n\t\tgetFallbackBlock() {\n\t\t\treturn this.getBlockInstance(getBlockTemplate(\"fallback-component\"));\n\t\t},\n\t\tgetComponentName(componentId: string) {\n\t\t\tlet componentObj = webComponent.getRow(componentId);\n\t\t\tif (!componentObj) {\n\t\t\t\treturn componentId;\n\t\t\t}\n\t\t\treturn componentObj.component_name as Block;\n\t\t},\n\t\tsetupHistory() {\n\t\t\tconst { builderState } = storeToRefs(this);\n\t\t\tthis.history = useDebouncedRefHistory(builderState, {\n\t\t\t\tcapacity: 200,\n\t\t\t\tdeep: true,\n\t\t\t\tclone: (obj) => {\n\t\t\t\t\tlet newObj = Object.assign({}, obj);\n\t\t\t\t\tnewObj.blocks = obj.blocks.map((val: Block) => this.getBlockCopy(val, true));\n\t\t\t\t\treturn newObj;\n\t\t\t\t},\n\t\t\t\tdebounce: 200,\n\t\t\t}) as unknown as typeof this.history;\n\t\t},\n\t\tuploadFile(file: File) {\n\t\t\tconst uploader = new FileUploadHandler();\n\t\t\treturn uploader\n\t\t\t\t.upload(file, {\n\t\t\t\t\tprivate: false,\n\t\t\t\t\tfolder: \"Home/Builder Uploads\",\n\t\t\t\t\toptimize: true,\n\t\t\t\t})\n\t\t\t\t.then((fileDoc: { file_url: string; file_name: string }) => {\n\t\t\t\t\tconst fileURL = encodeURI(window.location.origin + fileDoc.file_url);\n\t\t\t\t\treturn {\n\t\t\t\t\t\tfileURL,\n\t\t\t\t\t\tfileName: fileDoc.file_name,\n\t\t\t\t\t};\n\t\t\t\t});\n\t\t},\n\t\tclearSelection() {\n\t\t\tthis.selectedBlocks = [];\n\t\t},\n\t\tgetActivePage() {\n\t\t\treturn webPages.getRow(this.selectedPage as string) as BuilderPage;\n\t\t},\n\t\tasync publishPage() {\n\t\t\treturn webPages.runDocMethod\n\t\t\t\t.submit({\n\t\t\t\t\tname: this.selectedPage as string,\n\t\t\t\t\tmethod: \"publish\",\n\t\t\t\t\t...this.routeVariables,\n\t\t\t\t})\n\t\t\t\t.then((res: { message: string }) => {\n\t\t\t\t\tlet route = res.message;\n\n\t\t\t\t\tif (this.getActivePage().dynamic_route ,this.pageData) {\n\t\t\t\t\t\tconst routeVariables = (route?.match(/<\\w+>/g) || []).map((match: string) => match.slice(1, -1));\n\t\t\t\t\t\trouteVariables.forEach((variable: string) => {\n\t\t\t\t\t\t\tif (this.routeVariables[variable]) {\n\t\t\t\t\t\t\t\troute = route?.replace(`<${variable}>`, this.routeVariables[variable]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\twindow.open(`/${route}`, \"_blank\");\n\t\t\t\t});\n\t\t},\n\t\tsavePage() {\n\t\t\tconst pageData = JSON.stringify(this.getPageData());\n\t\t\tconst args = {\n\t\t\t\tname: this.selectedPage,\n\t\t\t\tdraft_blocks: pageData,\n\t\t\t};\n\t\t\twebPages.setValue.submit(args);\n\t\t},\n\t\tsetPageData() {\n\t\t\tconst page = this.getActivePage();\n\t\t\tif (!page || !page.page_data_script) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\twebPages.runDocMethod\n\t\t\t\t.submit({\n\t\t\t\t\tmethod: \"get_page_data\",\n\t\t\t\t\tname: page.name,\n\t\t\t\t\t...this.routeVariables,\n\t\t\t\t})\n\t\t\t\t.then((data: { message: { [key: string]: [] } }) => {\n\t\t\t\t\tthis.pageData = data.message;\n\t\t\t\t})\n\t\t\t\t.catch(() => {\n\t\t\t\t\ttoast({\n\t\t\t\t\t\ttext: \"There was error in fetching page data\",\n\t\t\t\t\t\tposition: \"top-right\",\n\t\t\t\t\t\ticon: \"disabled\",\n\t\t\t\t\t\ticonClasses: \"text-red-500\",\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t},\n\t\tsetRouteVariable(variable: string, value: string) {\n\t\t\tthis.routeVariables[variable] = value;\n\t\t\tlocalStorage.setItem(`${this.selectedPage}:routeVariables`, JSON.stringify(this.routeVariables));\n\t\t\tthis.setPageData();\n\t\t},\n\t\topenInDesk(page: BuilderPage) {\n\t\t\twindow.open(`/app/builder-page/${page.page_name}`, \"_blank\");\n\t\t},\n\t},\n});\n\nexport default useStore;\n"],"names":["webPages","createListResource","getNumberFromPx","px","smoothTransition","parent","children","parentPosition","childrenPosition","PixelToNumber","addPxToNumber","number","round","PixelAfterZoom","store","useStore","HexToHSV","color","r","g","b","a","_a","x","max","min","v","d","s","h","alpha","HSVToHex","i","f","p","q","t","confirm","message","__async","resolve","confirmed","getTextContent","html","isHTMLString","tmp","textContent","RGBToHex","rgb","getRGB","updateOpacityInHex","opacity","validateColor","validateOpacity","getFirstColorFromGradient","gradient","all","match","isColorDark","hexColor","getAllColorsFromGradient","getGradientType","replaceColorsInGradient","colors","allColors","getOpacity","str","copyToClipboard","text","copyFormat","stripExtension","string","lastDotPosition","findNearestSiblingIndex","e","nearestElementIndex","minDistance","element","index","rect","centerX","centerY","distance","kebabToCamelCase","isJSONString","isTargetEditable","target","isEditable","isInput","getDataForKey","datum","key","data","resetBlock","block","extendedFromComponent","child","componentChild","Block","options","__publicField","reactive","gr","out","breakpoint","styleObj","__spreadValues","componentBlock","attributes","classes","description","editor","style","value","attribute","y","direction","top","left","clamp","childBlock","siblingBlock","siblingIndex","styles","fontFamily","nextTick","childIndex","dataKey","innerHTML","componentName","component","componentNames","name","blockCopy","parentBlock","padding","paddingTop","paddingBottom","paddingLeft","paddingRight","paddingArray","margin","marginArray","marginTop","marginBottom","marginLeft","marginRight","Block$1","webComponent","webComponent$1","getBlockTemplate","type","defaultAttributes","toKebabCase","createLucideIcon","iconName","iconNode","attrs","slots","_b","size","strokeWidth","absoluteStrokeWidth","props","__objRest","__spreadProps","HelpCircle","Layers","LayoutPanelLeft","Shapes","Sparkles","defineStore","blocks","firstBlock","newblock","currentIndex","retainId","deleteBlockId","page","variables","imageSrc","imageAlt","imageBlock","blockId","found","scrollIntoView","checkComponent","saveComponent","toast","obj","updateExisting","existingComponent","newComponent","componentId","componentObj","builderState","storeToRefs","useDebouncedRefHistory","newObj","val","file","FileUploadHandler","fileDoc","res","route","variable","pageData","args","useStore$1"],"mappings":"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,CACD,EACA,mBAAoB,CACnB,CACC,KAAM,MACN,SAAU,aACV,WAAY,aACZ,KAAM,UACP,EACA,CACC,KAAM,SACN,SAAU,aACV,WAAY,SACZ,KAAM,OACP,EACA,CACC,KAAM,SACN,SAAU,aACV,WAAY,WACZ,KAAM,YACP,CACD,EACA,SAAU,OACV,MAAO,IACP,cAAgC,KAChC,gBAAiB,CAChB,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,oDACA,oDACA,oDACA,oDACA,oDACA,oDACA,sDACA,QACA,aACD,EACA,OAAQ,CACP,MAAO,GACP,MAAO,GACP,EAAG,EACH,EAAG,CACJ,EACA,WAAY,CACX,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,SACD,EACA,kBAAmB,CAClB,CACC,KAAM,UACN,OAAQ,UACR,YAAa,UACb,MAAO,KACP,QAAS,EACV,EACA,CACC,KAAM,SACN,OAAQ,SACR,YAAa,SACb,MAAO,IACP,QAAS,EACV,EACA,CACC,KAAM,aACN,OAAQ,SACR,YAAa,SACb,MAAO,IACP,QAAS,EACV,CACD,EACA,mBAA0C,YAC1C,oBAA4C,aAC5C,0BAAyD,OACzD,eAAyB,GACzB,YAAqB,GACrB,cAAwB,GACxB,kBAAmB,CAClB,MAAO,GACP,WAAY,EACZ,WAAY,EACZ,OAAQ,EACR,OAAQ,EACR,WAAY,GACZ,QAAS,GACT,QAAS,GACT,cAAe,GACf,eAAoC,IACrC,EACA,sBAAuB,CACtB,MAAO,GACP,WAAY,EACZ,WAAY,EACZ,OAAQ,EACR,OAAQ,EACR,WAAY,GACZ,QAAS,GACT,QAAS,GACT,cAAe,GACf,eAAoC,IACrC,EACA,YAA+B,KAC/B,WAA8B,CAAC,CAAA,GAEhC,QAAS,CACR,aAAc,CACR,KAAA,aAAa,OAAS,GAC3B,KAAK,aAAa,OAAO,KAAK,KAAK,cAAc,C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"}