var D=Object.defineProperty;var k=Object.getOwnPropertySymbols;var N=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable;var w=(l,r,e)=>r in l?D(l,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):l[r]=e,z=(l,r)=>{for(var e in r||(r={}))N.call(r,e)&&w(l,e,r[e]);if(k)for(var e of k(r))P.call(r,e)&&w(l,e,r[e]);return l};var y=(l,r,e)=>new Promise((i,m)=>{var g=t=>{try{o(e.next(t))}catch(n){m(n)}},h=t=>{try{o(e.throw(t))}catch(n){m(n)}},o=t=>t.done?i(t.value):Promise.resolve(t.value).then(g,h);o((e=e.apply(l,r)).next())});import{_ as F}from"./builder_logo.41e4a9f2.js";import{u as L,w as d,c as U}from"./store.70b8d965.js";import{q as A,s as C,u as $,v as S,r as f,o as p,d as b,b as s,j as c,w as u,l as T,x as _,p as q,F as V,e as E,c as M,t as B,U as Y,y as G}from"./index.b08d9d08.js";import"./fileUploadHandler.7bd6d646.js";const H={class:"toolbar flex h-14 items-center justify-center bg-white p-2 shadow-sm dark:border-b-[1px] dark:border-gray-800 dark:bg-zinc-900",ref:"toolbar"},J={class:"absolute left-3 flex items-center"},K=s("img",{src:F,alt:"logo",class:"h-7"},null,-1),O=s("h1",{class:"text-md mt-[2px] font-semibold leading-5 text-gray-800 dark:text-gray-200"},"Builder",-1),Q={class:"max-w-800 m-auto mb-32 flex w-3/4 flex-col pt-10"},R={class:"mb-6 flex items-center justify-between"},W=s("h1",{class:"text-sm font-bold uppercase text-gray-800 dark:text-zinc-400"},"My Pages",-1),X={class:"flex gap-4"},Z={class:"flex flex-wrap gap-6"},ee={key:0,class:"flex flex-col items-center justify-center"},te=s("p",{class:"mt-4 text-center text-base text-gray-500"},` You don't have any pages yet. Click on the "+ New" button to create a new page. `,-1),se=[te],oe={key:1,class:"flex flex-col items-center justify-center"},ae=s("p",{class:"mt-4 text-center text-base text-gray-500"},"No matching pages found.",-1),re=[ae],le={class:"group relative mr-2 w-full overflow-hidden rounded-md shadow hover:cursor-pointer dark:border-zinc-700 dark:bg-zinc-900 dark:text-zinc-200"},ne=["src"],ie={class:"flex items-center justify-between border-t-[1px] px-3 dark:border-zinc-800"},ce={class:"inline-block max-w-[160px] py-2 text-sm text-gray-700 dark:text-zinc-200"},de={class:"flex items-center gap-1"},ue={class:"truncate"},me={class:"mt-1 block text-xs text-gray-500"},he=A({__name:"PageBuilderLanding",setup(l){const r=L(),e=C(""),i=C(""),m=$(()=>(d.data||[]).filter(o=>{var t,n;return i.value&&(i.value==="published"&&!o.published||i.value==="unpublished"&&o.published||i.value==="draft"&&!o.draft_blocks)?!1:e.value?((t=o.page_title)==null?void 0:t.toLowerCase().includes(e.value.toLowerCase()))||((n=o.route)==null?void 0:n.toLowerCase().includes(e.value.toLowerCase())):!0})),g=o=>y(this,null,function*(){(yield U(`Are you sure you want to delete Page: ${o.page_name}?`))&&(yield d.delete.submit(o.name))}),h=o=>y(this,null,function*(){const t=z({},o);t.page_name=`${o.page_name}-copy`,t.page_title=`${o.page_title} Copy`,yield d.insert.submit(t)});return S(()=>{d.fetch()}),(o,t)=>{const n=f("router-link"),v=f("Input"),I=f("Button"),j=f("FeatherIcon");return p(),b(V,null,[s("div",H,[s("div",J,[c(n,{class:"flex items-center gap-2",to:{name:"home"}},{default:u(()=>[K,O]),_:1})])],512),s("section",Q,[s("div",R,[W,s("div",X,[c(v,{class:"h-7 rounded-md text-sm text-gray-800 hover:border-gray-400 focus:border-gray-400 focus:bg-gray-50 focus:ring-0 dark:border-zinc-800 dark:bg-zinc-900 dark:text-zinc-200 dark:focus:border-zinc-200 focus:dark:border-zinc-700",type:"text",placeholder:"Filter by title or route",inputClass:"w-full",modelValue:e.value,"onUpdate:modelValue":t[0]||(t[0]=a=>e.value=a),onInput:t[1]||(t[1]=a=>{e.value=a})},null,8,["modelValue"]),c(v,{type:"select",class:"h-7 rounded-md border-gray-400 text-sm text-gray-800 focus:border-gray-400 focus:bg-gray-50 focus:ring-0 dark:border-zinc-800 dark:bg-zinc-900 dark:text-zinc-200 dark:focus:border-zinc-200 focus:dark:border-zinc-700",inputClass:"w-32",modelValue:i.value,"onUpdate:modelValue":t[2]||(t[2]=a=>i.value=a),options:[{label:"All",value:""},{label:"Draft",value:"draft"},{label:"Published",value:"published"},{label:"Unpublished",value:"unpublished"}]},null,8,["modelValue"]),c(n,{to:{name:"builder",params:{pageId:"new"}}},{default:u(()=>[c(I,{variant:"solid","icon-left":"plus"},{default:u(()=>[T("New")]),_:1})]),_:1})])]),s("div",Z,[!_(d).data||!_(d).data.length?(p(),b("div",ee,se)):m.value.length?q("",!0):(p(),b("div",oe,re)),(p(!0),b(V,null,E(m.value,a=>(p(),M(n,{key:a.page_name,to:{name:"builder",params:{pageId:a.page_name}},class:"max-w-[250px] flex-grow basis-52"},{default:u(()=>[s("div",le,[s("img",{width:"250",height:"140",src:a.preview,onerror:"this.src='/assets/builder/images/fallback.png'",class:"w-full overflow-hidden rounded-lg bg-gray-50 object-cover p-2 dark:bg-zinc-900"},null,8,ne),s("div",ie,[s("span",ce,[s("div",de,[s("p",ue,B(a.page_title||a.page_name),1)]),c(_(Y),{time:a.creation},{default:u(({timeAgo:x})=>[s("p",me,B(x),1)]),_:2},1032,["time"])]),c(_(G),{options:[{label:"Duplicate",onClick:()=>h(a),icon:"copy"},{label:"View in Desk",onClick:()=>_(r).openInDesk(a),icon:"arrow-up-right"},{label:"Delete",onClick:()=>g(a),icon:"trash"}],size:"sm",placement:"right"},{default:u(({open:x})=>[c(j,{name:"more-vertical",class:"h-4 w-4 text-gray-500 group-hover:text-gray-700",onClick:x},null,8,["onClick"])]),_:2},1032,["options"])])])]),_:2},1032,["to"]))),128))])])],64)}}});export{he as default};
//# sourceMappingURL=PageBuilderLanding.447b4f84.js.map
